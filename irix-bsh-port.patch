diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/args.c /home/mario/git/irish/args.c
--- /home/mario/Downloads/original-bsh/args.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/args.c	2025-12-25 20:41:39.180036452 +0200
@@ -46,7 +46,6 @@
 	'f',
 	'a',
 	'm',
-	'p',
 	 0
 };
 
@@ -66,7 +65,6 @@
 	nofngflg,
 	exportflg,
 	monitorflg,
-	privflg,
 	  0
 };
 
@@ -263,6 +261,7 @@
 static struct dolnod *
 copyargs(from, n)
 	unsigned char	*from[];
+	int n;
 {
 	register struct dolnod *np = (struct dolnod *)alloc(sizeof(struct dolnod));
 	register unsigned char **fp = from;
@@ -321,7 +320,7 @@
 	globdolv = 0;
 	globdolc = 0;
 	globdolh = 0;
-	while (argfor = clean_args(argfor))
+	while ((argfor = clean_args(argfor)))
 		;
 	/*
 	 * clean up io files
Binary files /home/mario/Downloads/original-bsh/args.o and /home/mario/git/irish/args.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/blok.c /home/mario/git/irish/blok.c
--- /home/mario/Downloads/original-bsh/blok.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/blok.c	2025-12-25 20:41:39.180036452 +0200
@@ -1,227 +1,95 @@
-/*	Copyright (c) 1990, 1991 UNIX System Laboratories, Inc.	*/
-/*	Copyright (c) 1984, 1986, 1987, 1988, 1989, 1990 AT&T	*/
-/*	  All Rights Reserved  	*/
-
-/*	THIS IS UNPUBLISHED PROPRIETARY SOURCE CODE OF     	*/
-/*	UNIX System Laboratories, Inc.                     	*/
-/*	The copyright notice above does not evidence any   	*/
-/*	actual or intended publication of such source code.	*/
-
-#ident	"@(#)sh:blok.c	1.9.6.1"
-/*
- *	UNIX shell
- */
-#include	<memory.h>
 #include	"defs.h"
-
+#include    <stdlib.h>
+#include    <string.h>
 
 /*
  *	storage allocator
- *	(circular first fit strategy)
+ *	Replaced with standard malloc/free for Linux port
+ *  Wrapper functions sh_alloc/sh_free are used to maintain 
+ *  compatibility with valid legacy shell calls.
  */
 
-#define BUSY 01
-#define busy(x)	(Rcheat((x)->ag.word) & BUSY)
-
 unsigned	brkincr = BRKINCR;
-static struct blk *blokp;			/*current search pointer*/
-static struct blk *bloktop;		/* top of arena (last blok) */
-
-static unsigned char	*brkbegin, *aligned_brkbegin;
-unsigned char		*setbrk();
-void	addblok();
 
 #ifdef __STDC__
 void *
 #else
 char *
 #endif
-alloc(nbytes)
+sh_alloc(nbytes)
 	size_t nbytes;
 {
-	register unsigned rbytes = round(nbytes+ALIGN, ALIGN);
-
-	for (;;)
-	{
-		int	c = 0;
-		register struct blk *p = blokp;
-		register struct blk *q;
-
-		do
-		{
-			if (!busy(p))
-			{
-				while (!busy(q = p->ag.word))
-					p->ag.word = q->ag.word;
-				if ((char *)q - (char *)p >= rbytes)
-				{
-					blokp = (struct blk *)((char *)p + rbytes);
-					if (q > blokp)
-						blokp->ag.word = p->ag.word;
-					p->ag.word = (struct blk *)(Rcheat(blokp) | BUSY);
-					return((char *)(p + 1));
-				}
-			}
-			q = p;
-			p = (struct blk *)(Rcheat(p->ag.word) & ~BUSY);
-		} while (p > q || (c++) == 0);
-		addblok(rbytes);
+	void *p;
+	if (nbytes == 0) return NULL;
+	
+	p = malloc(nbytes);
+	if (!p) {
+		error(0, nospace, nospaceid);
 	}
+	return p;
 }
 
 void
-addblok(reqd)
-	unsigned reqd;
+sh_free(ap)
+	void *ap;
 {
-	if (stakbot == 0)
-	{
-		brkbegin = setbrk(3 * BRKINCR);
-		aligned_brkbegin = (unsigned char *) round(brkbegin, ALIGN);
-		bloktop = (struct blk *) aligned_brkbegin;
-	}
-
-	if (stakbas != staktop)
-	{
-		register unsigned char *rndstak;
-		register struct blk *blokstak;
-
-		/*
-		 * Round up at least one byte so
-		 * staktop doesn't get clobbered.
-		 */
-
-		rndstak = (unsigned char *)round(staktop+1, ALIGN);
-		blokstak = (struct blk *)(stakbas) - 1;
-		blokstak->ag.word = stakbsy;
-		stakbsy = blokstak;
-		bloktop->ag.word = (struct blk *)(Rcheat(rndstak) | BUSY);
-		bloktop = (struct blk *)(rndstak);
-	}
-	reqd += brkincr;
-	reqd &= ~(brkincr - 1);
-	blokp = bloktop;
-	bloktop = bloktop->ag.word = (struct blk *)(Rcheat(bloktop) + reqd);
-	bloktop->ag.word = (struct blk *) ((long) aligned_brkbegin | BUSY);
-	{
-		register unsigned char *stakadr = (unsigned char *)(bloktop + 2);
-
-		int length = staktop - stakbot;
-		if(length)
-			(void)memcpy(stakadr, stakbot, length);
-		stakbas = stakbot = stakadr;
-		staktop = stakbot + length;
+	if (ap) {
+#undef free
+		free(ap); 
+#define free sh_free
 	}
 }
 
+/* 
+ * addblok legacy stub
+ */
 void
-free(ap)
-	void *ap;
+addblok(reqd)
+	unsigned reqd;
 {
-	register struct blk *p;
-
-	p = (struct blk *)ap;
-	if (p && p < bloktop && p > (struct blk *)aligned_brkbegin)
-	{
-#ifdef DEBUG
-		chkbptr(p);
-#endif
-		--p;
-		p->ag.word = (struct blk *)(Rcheat(p->ag.word) & ~BUSY);
-	}
-
-
 }
 
-/*
- * realloc() is needed by __gtxt(). Normally not used.
+/* 
+ * realloc wrapper
+ * Used by __gtxt() in legacy code.
  */
 void *
 realloc(oldp, nbytes)
 void *oldp;
 size_t nbytes;
 {
-	void *newp;
+	if (!oldp) return sh_alloc(nbytes);
+	if (nbytes == 0) {
+		sh_free(oldp);
+		return NULL;
+	}
+	/* Use standard libc realloc. 
+	   We undefine realloc to bypass any potential macros (though none are currently defined). 
+	   Note: This function is exported as 'realloc' to match the symbol expected by some legacy IRIX libs or tests,
+	   even though defs.h maps realloc->sh_realloc for internal shell usage. */
+#undef realloc
+	return realloc(oldp, nbytes);
+#define realloc sh_realloc
+}
 
-	newp = alloc((int)nbytes);
-	if(newp){
-		(void)memcpy(newp, oldp, nbytes);
-		free(oldp);
-	}
-	return(newp);
+/* sh_realloc wrapper for internal shell references */
+void *
+sh_realloc(oldp, nbytes)
+void *oldp;
+size_t nbytes;
+{
+#undef realloc
+    return realloc(oldp, nbytes);
+#define realloc sh_realloc
 }
-#ifdef DEBUG
 
+#ifdef DEBUG
 chkbptr(ptr)
 	struct blk *ptr;
 {
-	int	exf = 0;
-	register struct blk *p = (struct blk *)aligned_brkbegin;
-	register struct blk *q;
-	int	us = 0, un = 0;
-
-	for (;;)
-	{
-		q = (struct blk *)(Rcheat(p->ag.word) & ~BUSY);
-
-		if (p+1 == ptr)
-			exf++;
-
-		if (q < (struct blk *)aligned_brkbegin || q > bloktop)
-			abort(/* 3 */);
-
-		if (p == bloktop)
-			break;
-
-		if (busy(p))
-			us += q - p;
-		else
-			un += q - p;
-
-		if (p >= q)
-			abort(/* 4 */);
-
-		p = q;
-	}
-	if (exf == 0)
-		abort(/* 1 */);
 }
 
-
 chkmem()
 {
-	register struct blk *p = (struct blk *)aligned_brkbegin;
-	register struct blk *q;
-	int	us = 0, un = 0;
-
-	for (;;)
-	{
-		q = (struct blk *)(Rcheat(p->ag.word) & ~BUSY);
-
-		if (q < (struct blk *)aligned_brkbegin || q > bloktop)
-			abort(/* 3 */);
-
-		if (p == bloktop)
-			break;
-
-		if (busy(p))
-			us += q - p;
-		else
-			un += q - p;
-
-		if (p >= q)
-			abort(/* 4 */);
-
-		p = q;
-	}
-
-	prs("un/used/avail ");
-	prn(un);
-	blank();
-	prn(us);
-	blank();
-	prn((char *)bloktop - aligned_brkbegin - (un + us));
-	newline();
-
 }
-
-#endif /* DEBUG */
+#endif
Binary files /home/mario/Downloads/original-bsh/blok.o and /home/mario/git/irish/blok.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/bltin.c /home/mario/git/irish/bltin.c
--- /home/mario/Downloads/original-bsh/bltin.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/bltin.c	2025-12-25 20:41:39.180036452 +0200
@@ -22,10 +22,10 @@
 #include	<sys/types.h>
 #include	<sys/times.h>
 #include	<sys/time.h>
-#include	<pfmt.h>
+/* #include	<pfmt.h> */
 #include	<string.h>
 
-extern	unsigned long	umask();
+/* extern unsigned long umask(); */
 extern	pid_t	fork();
 extern	pid_t	wait();
 extern	int	chdir();
@@ -52,13 +52,6 @@
 {
 	short index = initio(t->treio, (type != SYSEXEC));
 	unsigned char *a1 = argv[1];
-	int c, newmode = -1, mode, indx, pid, status;
-static	const struct {
-		const char *id, *msg;
-	} charmode[] = {
-		":823", "virtual",
-		":824", "real"
-	};
 
 	switch (type)		
 	{
@@ -203,7 +196,7 @@
 			     *a1 == '/' ||
 			     cf(a1, ".") == 0 ||
 			     cf(a1, "..") == 0 ||
-			     (*a1 == '.' && (*(a1+1) == '/' || *(a1+1) == '.' && *(a1+2) == '/')))
+			     (*a1 == '.' && (*(a1+1) == '/' || (*(a1+1) == '.' && *(a1+2) == '/'))))
 				cdpath = (unsigned char *)nullstr;
 
 			do
@@ -211,7 +204,7 @@
 				dir = cdpath;
 				cdpath = catpath(cdpath,a1);
 			}
-			while ((f = chdir(curstak()) < 0) && cdpath);
+			while ((f = chdir((char *)curstak()) < 0) && cdpath);
 
 			if (f) {
 				switch(errno) {
@@ -345,15 +338,6 @@
 		break;
 
 #ifndef RES	
-#ifdef sgi
-	case SYSLIMIT:
-		dolimit(argv);
-		break;
-
-	case SYSUNLIMIT:
-		dounlimit(argv);
-		break;
-#endif
 
 	case SYSULIMIT:
 		sysulimit(argc, argv);
Binary files /home/mario/Downloads/original-bsh/bltin.o and /home/mario/git/irish/bltin.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/cmd.c /home/mario/git/irish/cmd.c
--- /home/mario/Downloads/original-bsh/cmd.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/cmd.c	2025-12-25 20:41:39.180036452 +0200
@@ -12,7 +12,7 @@
  * UNIX shell
  */
 
-#include	<pfmt.h>
+#line 14
 #include	"defs.h"
 #include	"sym.h"
 #include	"hash.h"
@@ -124,7 +124,7 @@
 			synbad();
 
 	case ';':	/*FALLTHROUGH*/
-		if (e = cmd(sym, flg | MTFLG))
+		if ((e = cmd(sym, flg | MTFLG)))
 			i = makelist(TLST, i, e);
 		else if (i == 0)
 			synbad();
@@ -149,6 +149,7 @@
  */
 static struct trenod *
 list(flg)
+	int flg;
 {
 	register struct trenod *r;
 	register int		b;
@@ -166,6 +167,7 @@
  */
 static struct trenod *
 term(flg)
+	int flg;
 {
 	register struct trenod *t;
 
@@ -464,7 +466,7 @@
 	}
 	reserv++;
 	word();
-	if (io = inout(io))
+	if ((io = inout(io)))
 	{
 		r = makefork(0,r);
 		r->treio = io;
@@ -549,6 +551,7 @@
 
 static void
 chksym(sym)
+	int sym;
 {
 	register int	x = sym & wdval;
 
@@ -558,6 +561,7 @@
 
 static void
 prsym(sym)
+	int sym;
 {
 	if (sym & SYMFLG)
 	{
Binary files /home/mario/Downloads/original-bsh/cmd.o and /home/mario/git/irish/cmd.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/compat.c /home/mario/git/irish/compat.c
--- /home/mario/Downloads/original-bsh/compat.c	1970-01-01 02:00:00.000000000 +0200
+++ /home/mario/git/irish/compat.c	2025-12-25 20:41:39.180036452 +0200
@@ -0,0 +1,55 @@
+#include "compat.h"
+#include <fnmatch.h>
+#include <signal.h>
+#include <stdio.h>
+#include <string.h>
+
+/* Global environment for renomed environ */
+unsigned char **sh_environ;
+
+/* Signal list shims */
+const char *const _sys_siglist[] = {
+    "EXIT", "HUP", "INT", "QUIT", "ILL", "TRAP", "ABRT", "EMT", "FPE",
+    "KILL", "BUS", "SEGV", "SYS", "PIPE", "ALRM", "TERM", "USR1", "USR2",
+    "CHLD", "PWR", "WINCH", "URG", "IO", "STOP", "TSTP", "CONT", "TTIN",
+    "TTOU", "VTALRM", "PROF", "XCPU", "XFSZ", "WAITING", "LWP", "FREEZE",
+    "THAW", "CANCEL", "LOST", "USR1", "USR2", NULL
+};
+int _sys_nsig = 40;
+
+int gmatch(const char *s, const char *p) {
+    return fnmatch(p, s, FNM_PATHNAME) == 0;
+}
+
+int wisprint(int c) {
+    return iswprint(c);
+}
+
+int mbftowc(unsigned char *s, wchar_t *pwc, int (*f)(), int *p) {
+    /* Minimal stub for multibyte char reading */
+    int c = f(p);
+    if (c == EOF) return 0;
+    *pwc = (wchar_t)c;
+    s[0] = (unsigned char)c;
+    s[1] = '\0';
+    return 1;
+}
+
+int sig2str(int sig, char *str) {
+    if (sig >= 0 && sig < _sys_nsig && _sys_siglist[sig]) {
+        strcpy(str, _sys_siglist[sig]);
+        return 0;
+    }
+    return -1;
+}
+
+int str2sig(char *str, int *sig) {
+    int i;
+    for (i = 0; i < _sys_nsig; i++) {
+        if (_sys_siglist[i] && strcmp(str, _sys_siglist[i]) == 0) {
+            *sig = i;
+            return 0;
+        }
+    }
+    return -1;
+}
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/compat.h /home/mario/git/irish/compat.h
--- /home/mario/Downloads/original-bsh/compat.h	1970-01-01 02:00:00.000000000 +0200
+++ /home/mario/git/irish/compat.h	2025-12-25 20:41:39.180036452 +0200
@@ -0,0 +1,81 @@
+#ifndef COMPAT_H
+#define COMPAT_H
+
+#include <sys/types.h>
+#include <sys/param.h>
+#include <unistd.h>
+#include <stdlib.h>
+#include <string.h>
+#include <signal.h>
+#include <errno.h>
+#include <setjmp.h>
+#include <time.h>
+#include <sys/wait.h>
+#include <sys/stat.h>
+#include <fcntl.h>
+#include <termios.h>
+#include <fnmatch.h>
+#include <wchar.h>
+#include <ctype.h>
+#include <wctype.h>
+
+/* IRIX/SVR4 types */
+typedef unsigned char uchar_t;
+typedef unsigned int uint_t;
+typedef unsigned short ushort_t;
+typedef unsigned long ulong_t;
+
+/* Shims for pfmt/locale/setlabel */
+#include <stdio.h>
+#include <stdarg.h>
+
+#define MM_ERROR 0
+#define MM_WARNING 1
+#define MM_INFO 2
+#define MM_ACTION 3
+#define MM_NOLABEL 0x10
+#define MM_NOSTD 0x20
+#define MAXLABEL 24
+
+static inline int pfmt(FILE *stream, long flags, const char *format, ...) {
+    va_list args;
+    va_start(args, format);
+    int ret = vfprintf(stream, format, args);
+    va_end(args);
+    return ret;
+}
+
+static inline char *gettxt(const char *id, const char *def) {
+    return (char *)def;
+}
+
+static inline int setlabel(const char *label) {
+    return 0;
+}
+
+#define gettext(x) (x)
+#define _gettext(x) (x)
+
+/* Missing macros */
+#ifndef MAXNAMLEN
+#define MAXNAMLEN 255
+#endif
+
+#define setcat(x) (0)
+#define setlabel(x) (0)
+
+/* Linker shims */
+int gmatch(const char *s, const char *p);
+int sig2str(int sig, char *str);
+int str2sig(char *str, int *sig);
+int wisprint(int c);
+int mbftowc(unsigned char *s, wchar_t *pwc, int (*f)(), int *p);
+
+extern unsigned char **sh_environ;
+extern const char *const _sys_siglist[];
+extern int _sys_nsig;
+
+#endif /* COMPAT_H */
+#ifndef EFF_ONLY_OK
+#define EFF_ONLY_OK 0
+#endif
Binary files /home/mario/Downloads/original-bsh/compat.o and /home/mario/git/irish/compat.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/ctype.h /home/mario/git/irish/ctype.h
--- /home/mario/Downloads/original-bsh/ctype.h	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/ctype.h	2025-12-25 20:41:39.180036452 +0200
@@ -72,21 +72,21 @@
 extern const unsigned char	_ctype1[];
 
 /* nb these args are not call by value !!!! */
-#define	space(c)	(((c)&QUOTE)==0 && _ctype1[c]&(T_SPC))
-#define eofmeta(c)	(((c)&QUOTE)==0 && _ctype1[c]&(_META|T_EOF))
-#define qotchar(c)	(((c)&QUOTE)==0 && _ctype1[c]&(T_QOT))
-#define eolchar(c)	(((c)&QUOTE)==0 && _ctype1[c]&(T_EOR|T_EOF))
-#define dipchar(c)	(((c)&QUOTE)==0 && _ctype1[c]&(T_DIP))
-#define subchar(c)	(((c)&QUOTE)==0 && _ctype1[c]&(T_SUB|T_QOT))
-#define escchar(c)	(((c)&QUOTE)==0 && _ctype1[c]&(T_ESC))
+#define	space(c)	(((c)&QUOTE)==0 && _ctype1[(unsigned char)(c)]&(T_SPC))
+#define eofmeta(c)	(((c)&QUOTE)==0 && _ctype1[(unsigned char)(c)]&(_META|T_EOF))
+#define qotchar(c)	(((c)&QUOTE)==0 && _ctype1[(unsigned char)(c)]&(T_QOT))
+#define eolchar(c)	(((c)&QUOTE)==0 && _ctype1[(unsigned char)(c)]&(T_EOR|T_EOF))
+#define dipchar(c)	(((c)&QUOTE)==0 && _ctype1[(unsigned char)(c)]&(T_DIP))
+#define subchar(c)	(((c)&QUOTE)==0 && _ctype1[(unsigned char)(c)]&(T_SUB|T_QOT))
+#define escchar(c)	(((c)&QUOTE)==0 && _ctype1[(unsigned char)(c)]&(T_ESC))
 
 extern const unsigned char	_ctype2[];
 
-#define	digit(c)	(((c)&QUOTE)==0 && _ctype2[c]&(T_DIG))
-#define dolchar(c)	(((c)&QUOTE)==0 && _ctype2[c]&(T_AST|T_BRC|T_DIG|T_IDC|T_SHN))
-#define defchar(c)	(((c)&QUOTE)==0 && _ctype2[c]&(T_DEF))
-#define setchar(c)	(((c)&QUOTE)==0 && _ctype2[c]&(T_SET))
-#define digchar(c)	(((c)&QUOTE)==0 && _ctype2[c]&(T_AST|T_DIG))
-#define	letter(c)	(((c)&QUOTE)==0 && _ctype2[c]&(T_IDC))
-#define alphanum(c)	(((c)&QUOTE)==0 && _ctype2[c]&(_IDCH))
-#define astchar(c)	(((c)&QUOTE)==0 && _ctype2[c]&(T_AST))
+#define	digit(c)	(((c)&QUOTE)==0 && _ctype2[(unsigned char)(c)]&(T_DIG))
+#define dolchar(c)	(((c)&QUOTE)==0 && _ctype2[(unsigned char)(c)]&(T_AST|T_BRC|T_DIG|T_IDC|T_SHN))
+#define defchar(c)	(((c)&QUOTE)==0 && _ctype2[(unsigned char)(c)]&(T_DEF))
+#define setchar(c)	(((c)&QUOTE)==0 && _ctype2[(unsigned char)(c)]&(T_SET))
+#define digchar(c)	(((c)&QUOTE)==0 && _ctype2[(unsigned char)(c)]&(T_AST|T_DIG))
+#define	letter(c)	(((c)&QUOTE)==0 && _ctype2[(unsigned char)(c)]&(T_IDC))
+#define alphanum(c)	(((c)&QUOTE)==0 && _ctype2[(unsigned char)(c)]&(_IDCH))
+#define astchar(c)	(((c)&QUOTE)==0 && _ctype2[(unsigned char)(c)]&(T_AST))
Binary files /home/mario/Downloads/original-bsh/ctype.o and /home/mario/git/irish/ctype.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/defs.h /home/mario/git/irish/defs.h
--- /home/mario/Downloads/original-bsh/defs.h	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/defs.h	2025-12-25 20:41:39.180036452 +0200
@@ -10,9 +10,10 @@
 /*	Portions Copyright(c) 1988, Sun Microsystems, Inc.	*/
 /*	All Rights Reserved.					*/
 
-#ident	"@(#)sh:defs.h	1.15.22.2"
-/*
- *	UNIX shell
+#ifndef DEFS_H
+#define DEFS_H
+
+/*	UNIX shell
  */
 
 /* execute flags */
@@ -36,6 +37,8 @@
 #define 	FAMP		0x0400
 #define 	COMMSK		0x00F0
 #define		CNTMSK		0x000F
+#define		ARGMK		((intptr_t)0x01)
+#define		WORD		0
 
 #define 	TCOM		0x0000
 #define 	TPAR		0x0010
@@ -96,12 +99,11 @@
 #define 	SYSKILL		32
 #define 	SYSSUSP		33
 #define 	SYSSTOP		34
-#define		SYSPRIV		35
-#define		SYSMLD		36
-#if defined(sgi) && !defined(RES)
-#define		SYSLIMIT	37
-#define		SYSUNLIMIT	38
-#endif
+
+#define SYSPRIV		(SYSNEWGRP|020)
+#define SYSLIMIT	(SYSNEWGRP|021)
+#define SYSUNLIMIT	(SYSNEWGRP|022)
+#define SYSMLD		(SYSNEWGRP|023)
 
 /* used for input and output of shell */
 #define 	INIO 		19
@@ -110,6 +112,7 @@
 #define 	USERIO		10
 #define 	IOUFD		15
 #define 	IODOC		16
+#define		IODIGFD		32
 #define 	IOPUT		32
 #define 	IOAPP		64
 #define 	IOMOV		128
@@ -138,12 +141,21 @@
 
 extern int		optind;
 extern int		opterr;
-extern int 		_sp;
-extern char 		*optarg;
+#include	<signal.h>
+#include	<sys/types.h>
+#include    "compat.h"
 
-/* result type declarations */
+#ifdef EOF
+#undef EOF
+#endif
+#define EOF 0
+#define SH_EOF 0
 
-#define 	alloc 		malloc
+/* id's */
+
+/* Redirect shell allocators to avoid libc conflicts */
+#define alloc sh_alloc
+#define free sh_free
 
 #ifdef __STDC__
 extern void *alloc();
@@ -249,6 +261,7 @@
 
 /*From name.c*/
 extern unsigned char *make();
+#define setenv sh_setenv
 extern unsigned char **setenv();
 extern struct namnod *lookup();
 extern struct namnod *findnam();
@@ -291,9 +304,9 @@
 /*From profile.c*/
 extern void monitor();
 
-/*From prv.c*/
-extern int clrprivs();
-extern void rstprivs();
+/*From prv.c: Removed for POSIX port*/
+/* extern int clrprivs(); */
+/* extern void rstprivs(); */
 
 /*From pwd.c*/
 extern unsigned char *cwdget();
@@ -340,9 +353,9 @@
 
 /*From word.c*/
 extern int word();
-extern unsigned char readc();
-extern unsigned char nextc();
-extern unsigned char skipc();
+extern int readc();
+extern int nextc();
+extern int skipc();
 extern unsigned char *readw();
 
 /*From xec.c*/
@@ -352,7 +365,7 @@
 
 /*Macros*/
 #define 	attrib(n,f)		(n->namflg |= f)
-#define 	round(a,b)		(((int)(((char *)(a)+b)-1))&~((b)-1))
+#define 	round(a,b)		((((long)(a)+(b))-1)&~((b)-1))
 #define 	closepipe(x)	(close(x[INPIPE]), close(x[OTPIPE]))
 #define 	eq(a,b)			(cf(a,b)==0)
 #define 	max(a,b)		((a)>(b)?(a):(b))
@@ -484,9 +497,9 @@
 #define		exportflg	0400000
 #define		monitorflg	01000000
 #define		jcflg		02000000
-#define		privflg		04000000
+/* #define		privflg		04000000 */ /* Removed for POSIX port */
 #define		forcexit	010000000
-#define		jcoff		020000000
+/* #define		jcoff		020000000 */ /* Removed for POSIX port */
 
 extern long				flags;
 extern int				rwait;	/* flags read waiting */
@@ -511,6 +524,8 @@
 extern BOOL				trapnote;
 
 /* name tree and words */
+extern	int		_sp;
+#define environ sh_environ
 extern unsigned char				**environ;
 extern unsigned char				numbuf[];
 extern const char				export[], exportid[];
@@ -525,20 +540,15 @@
 extern int				funcnt;
 
 /* messages */
+/* messages */
 extern const char				nopset[], nopsetid[];
-extern const char				setprv[], setprvid[];
-extern const char				clrprv[], clrprvid[];
-extern const char				setnam[], setnamid[];
-extern const char				prvnam[], prvnamid[];
-extern const char				getpriv[], getprivid[];
-extern const char				rstpriv[], rstprivid[];
-extern const char				prvunsup[], prvunsupid[];
-extern const char				mldusage[], mldusageid[];
-extern const char				nosetmode[], nosetmodeid[];
-extern const char				nogetmode[], nogetmodeid[];
-extern const char				notsupport[], notsupportid[];
-extern const char				invalcomb[], invalcombid[];
-extern const char				mldmodeis[], mldmodeisid[];
+/* 
+ * IRIX Privilege/MLD message externs removed 
+ */
+extern const char				mailmsg[], mailmsgid[];
+#if defined(sgi)
+/* SGI specific messages removed */
+#endif
 extern const char				mailmsg[], mailmsgid[];
 extern const char				coredump[], coredumpid[];
 extern const char				badopt[], badoptid[];
@@ -659,6 +669,7 @@
 void error_fail(int, const char *, const char *);
 void failure(int, const unsigned char *, const char *, const char *);
 void prusage(int, const char *, const char *);
+void warning(int, const char *, const char *);
 #else
 void failed();
 void error();
@@ -667,3 +678,4 @@
 void warning();
 void error_fail();
 #endif
+#endif /* DEFS_H */
Binary files /home/mario/Downloads/original-bsh/defs.o and /home/mario/git/irish/defs.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/echo.c /home/mario/git/irish/echo.c
--- /home/mario/Downloads/original-bsh/echo.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/echo.c	2025-12-25 20:41:39.180036452 +0200
@@ -20,7 +20,9 @@
 
 extern int exitval;
 
+int
 echo(argc, argv)
+int argc;
 unsigned char **argv;
 {
 	register unsigned char	*cp;
@@ -59,7 +61,7 @@
 
 		if (!strncmp((const char *)argv[1], "-n", 3)) {
 			nonl++;
-			*++argv;
+			++argv;
 			argc--;
 		}
 	
Binary files /home/mario/Downloads/original-bsh/echo.o and /home/mario/git/irish/echo.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/error.c /home/mario/git/irish/error.c
--- /home/mario/Downloads/original-bsh/error.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/error.c	2025-12-28 13:54:04.661139589 +0200
@@ -12,12 +12,17 @@
  * UNIX shell
  */
 
-#include	<pfmt.h>
+#include	<stdio.h>
 #include	<string.h>
 #include	"defs.h"
 
 static void com_failed();
 
+static char current_label[MAXLABEL + 1];
+
+#define SVR4_ERROR   "ERROR: "
+#define SVR4_WARNING "WARNING: "
+
 extern int unlink();
 
 /* ========	error handling	======== */
@@ -28,7 +33,7 @@
 const char unsigned *s1;
 const char	 *s2, *s2id;
 {
-	com_failed(cmd, MM_ERROR, s1, s2, s2id);
+	com_failed(cmd, 0, s1, s2, s2id);
 	exitsh(ERROR);
 }
 
@@ -37,7 +42,7 @@
 int cmd;
 const char	*s, *sid;
 {
-	failed(cmd, (const unsigned char *)gettxt(sid, s), NIL, NIL);
+	failed(cmd, (const unsigned char *)s, NIL, NIL);
 }
 
 void
@@ -45,7 +50,7 @@
 int cmd;
 const char	*s, *sid;
 {
-	failure(cmd, (const unsigned char *)gettxt(sid, s), NIL, NIL);
+	failure(cmd, (const unsigned char *)s, NIL, NIL);
 }
 
 void
@@ -53,7 +58,7 @@
 int cmd;
 const char	*s, *sid;
 {
-	com_failed(cmd, MM_WARNING, (const unsigned char *)gettxt(sid, s), NIL, NIL);
+	com_failed(cmd, 1, (const unsigned char *)s, NIL, NIL);
 }
 
 void
@@ -88,7 +93,7 @@
 {
 	while (iotemp > base)
 	{
-		(void)unlink(iotemp->ioname);
+		(void)unlink((char *)iotemp->ioname);
 		free(iotemp->iolink);
 		iotemp = iotemp->iolst;
 	}
@@ -99,7 +104,7 @@
 {
 	while (fiotemp)
 	{
-		(void)unlink(fiotemp->ioname);
+		(void)unlink((char *)fiotemp->ioname);
 		fiotemp = fiotemp->iolst;
 	}
 }
@@ -110,7 +115,7 @@
 const char unsigned *s1;
 const char	 *s2, *s2id;
 {
-	com_failed(cmd, MM_ERROR, s1, s2, s2id);
+	com_failed(cmd, 0, s1, s2, s2id);
 	if (flags & errflg)
 		exitsh(ERROR);
 
@@ -127,8 +132,9 @@
 	flushb();
 	(void)set_label(cmd);
 
-	pfmt(stderr, MM_ERROR, badusage);
-	pfmt(stderr, MM_ACTION, usage, gettxt(sid, s));
+	/* pfmt(stderr, MM_ERROR, badusage); */
+	/* pfmt(stderr, MM_ACTION, usage, gettxt(sid, s)); */
+	fprintf(stderr, "sh: usage: %s\n", s);
 
 	if (flags & errflg)
 		exitsh(ERROR);
@@ -146,8 +152,9 @@
 	flushb();
 	(void)set_label(cmd);
 
-	pfmt(stderr, MM_ERROR, badusage);
-	pfmt(stderr, MM_ACTION, usage, gettxt(sid, s));
+	/* pfmt(stderr, MM_ERROR, badusage); */
+	/* pfmt(stderr, MM_ACTION, usage, gettxt(sid, s)); */
+	fprintf(stderr, "sh: usage: %s\n", s);
 	exitsh(ERROR);
 }
 
@@ -158,26 +165,22 @@
 const char unsigned *s1;
 const char	 *s2, *s2id;
 {
-	int comb_label;
 	flushb();
-	comb_label = set_label(cmd);
-	pfmt(stderr, flag, NULL);
-
-	if (!comb_label)
-		prp();
+	(void)set_label(cmd);
 	
-	if (s2)
+	/* 
+	 * Authentic IRIX/SVR4 format: UX:label: SEVERITY: object: message
+	 */
+	prs(current_label);
+	prs(colon);
+	prs(flag ? SVR4_WARNING : SVR4_ERROR);
+	
+	if (s2) {
 		prs_cntl(s1);
-	else
+		prs(colon);
+		prs(s2);
+	} else {
 		prs(s1);
-
-	if (s2)
-	{
-		prs(gettxt(colonid, colon));
-		if (s2id)
-			prs(gettxt(s2id, s2));
-		else
-			prs(s2);
 	}
 	newline();
 }
@@ -251,5 +254,7 @@
 	}
 	
 	(void)setlabel(cmd_lbl);
+	strncpy(current_label, cmd_lbl, MAXLABEL);
+	current_label[MAXLABEL] = '\0';
 	return 1;
 }
Binary files /home/mario/Downloads/original-bsh/error.o and /home/mario/git/irish/error.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/expand.c /home/mario/git/irish/expand.c
--- /home/mario/Downloads/original-bsh/expand.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/expand.c	2025-12-25 20:41:39.180036452 +0200
@@ -40,8 +40,10 @@
 
 extern int	gmatch();
 
+int
 expand(as, rcnt)
 	unsigned char	*as;
+	int rcnt;
 {
 	int	count; 
 	DIR	*dirf;
@@ -160,7 +162,7 @@
 			if (e->d_name[0] == '.' && *cs != '.')
 				continue;
 
-			if (gmatch(e->d_name, cs))
+			if (gmatch(e->d_name, (char *)cs))
 			{
 				addg(s, e->d_name, rescan, slashsav);
 				count++;
@@ -248,7 +250,7 @@
 	s2 = locstak() + BYTESPERWORD;
 	s1 = as1;
 	if(as4) {
-		while (*s2 = *s1++)
+		while ((*s2 = *s1++))
 			s2++; 
 	/* Restore first slash before the first metacharacter if as1 is not "/" */
 		if(as4 + 1 == s1)
@@ -256,7 +258,7 @@
 	}
 /* add matched entries, plus extra \\ to escape \\'s */
 	s1 = as2;
-	while (*s2 = *s1++) {
+	while ((*s2 = *s1++)) {
 		if(*s2 == '\\')
 			*++s2 = '\\';
 		s2++;
@@ -265,7 +267,7 @@
 	if (s1)
 	{
 		*s2++ = '/';
-		while (*s2++ = *++s1);
+		while ((*s2++ = *++s1));
 	}
 	makearg(endstak(s2));
 }
Binary files /home/mario/Downloads/original-bsh/expand.o and /home/mario/git/irish/expand.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/fault.c /home/mario/git/irish/fault.c
--- /home/mario/Downloads/original-bsh/fault.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/fault.c	2025-12-25 20:41:39.180036452 +0200
@@ -11,10 +11,10 @@
 /*
  * UNIX shell
  */
-#include	<pfmt.h>
+/* #include	<pfmt.h> */ 
 #include	<unistd.h>
 #include	"defs.h"
-#include	<sys/procset.h>
+/* #include	<sys/procset.h> */
 
 void done();
 void stdsigs();
@@ -95,75 +95,58 @@
 	0       /* Real-time signal RTMAX */
 };
 
-static void (* const(
-sigval[]))() = 
+static void (*sigval[NSIG])() = { 0 };
+
+static void
+init_sigval()
 {
-	0,
-	done, 	/* 1:  hangup */
-	fault,	/* 2:  interrupt */
-	fault,	/* 3:  quit */
-	done,	/* 4:  illegal instr */
-	done,	/* 5:  trace trap */
-	done,	/* 6:  IOT */
-	done,	/* 7:  EMT */
-	done,	/* 8:  floating pt. exp */
-	0,	/* 9:  kill */
-	done, 	/* 10: bus error */
-	fault,	/* 11: memory faults */
-	done, 	/* 12: bad sys call */
-	done,	/* 13: bad pipe call */
-	done,	/* 14: alarm */
-	fault,	/* 15: software termination */
-	done,	/* 16: unassigned */
-	done,	/* 17: unassigned */
-	0,	/* 18: death of child */
-	done,	/* 19: power fail */
-	0,	/* 20: window size changes */
-	done,	/* 21: urgent condition on IO channel */
-	done,	/* 22: pollable event occurred or i/o possible signal */
-	0,	/* 23: sendable stop signal not from tty */
-	0,	/* 24: stop signal from tty */
-	0,	/* 25: continue a stopped process */
-	0,	/* 26: to readers pgrp upon background tty read */
-	0,	/* 27: like TTIN for output if (tp->t_local&LTOSTOP) */
-	done,	/* 28: virtual time alarm */
-	done,	/* 29: profiling alarm */
-	done,	/* 30: Cpu time limit exceeded */
-	done,	/* 31: Filesize limit exceeded */
-	0,	/* 32: not used in SVR4; needed for SIGPOLL/SIGIO in IRIX4 */
-	0,   /* User defined signal 33 */
-	0,   /* User defined signal 34 */
-	0,   /* User defined signal 35 */
-	0,   /* User defined signal 36 */
-	0,   /* User defined signal 37 */
-	0,   /* User defined signal 38 */
-	0,   /* User defined signal 39 */
-	0,   /* User defined signal 40 */
-	0,   /* User defined signal 41 */
-	0,   /* User defined signal 42 */
-	0,   /* User defined signal 43 */
-	0,   /* User defined signal 44 */
-	0,   /* User defined signal 45 */
-	0,   /* User defined signal 46 */
-	0,   /* User defined signal 47 */
-	0,   /* User defined signal 48 */
-	0,   /* Real-time signal RTMIN */
-	0,   /* Real-time signal RT2 */
-	0,   /* Real-time signal RT3 */
-	0,   /* Real-time signal RT4 */
-	0,   /* Real-time signal RT5 */
-	0,   /* Real-time signal RT6 */
-	0,   /* Real-time signal RT7 */
-	0,   /* Real-time signal RT8 */
-	0,   /* Real-time signal RT9 */
-	0,   /* Real-time signal RT10 */
-	0,   /* Real-time signal RT11 */
-	0,   /* Real-time signal RT12 */
-	0,   /* Real-time signal RT13 */
-	0,   /* Real-time signal RT14 */
-	0,   /* Real-time signal RT15 */
-	0    /* Real-time signal RTMAX */
-};
+	static int initialized = 0;
+	if (initialized) return;
+
+	sigval[SIGHUP] = done;
+	sigval[SIGINT] = fault;
+	sigval[SIGQUIT] = fault;
+	sigval[SIGILL] = done;
+	sigval[SIGTRAP] = done;
+	sigval[SIGIOT] = done;
+#ifdef SIGEMT
+	sigval[SIGEMT] = done;
+#endif
+	sigval[SIGFPE] = done;
+	sigval[SIGBUS] = done;
+	sigval[SIGSEGV] = fault;
+	sigval[SIGSYS] = done;
+	sigval[SIGPIPE] = done;
+	sigval[SIGALRM] = done;
+	sigval[SIGTERM] = fault;
+#ifdef SIGPWR
+	sigval[SIGPWR] = done;
+#endif
+#ifdef SIGXCPU
+	sigval[SIGXCPU] = done;
+#endif
+#ifdef SIGXFSZ
+	sigval[SIGXFSZ] = done;
+#endif
+#ifdef SIGVTALRM
+	sigval[SIGVTALRM] = done;
+#endif
+#ifdef SIGPROF
+	sigval[SIGPROF] = done;
+#endif
+
+	/* signals we definitely don't want to exit the shell on by default */
+	sigval[SIGCHLD] = 0;
+	sigval[SIGWINCH] = 0;
+	sigval[SIGURG] = 0;
+	sigval[SIGCONT] = 0;
+	sigval[SIGSTOP] = 0;
+	sigval[SIGTSTP] = 0;
+	sigval[SIGTTIN] = 0;
+	sigval[SIGTTOU] = 0;
+
+	initialized = 1;
+}
 
 static int
 ignoring(i)
@@ -202,6 +185,7 @@
 
 void
 done(sig)
+int sig;
 {
 	register unsigned char	*t = trapcom[0];
 
@@ -235,24 +219,17 @@
 static void 
 fault(sig, code, scp)
 register int	sig;
-struct sigcontext *scp;
+int code;
+void *scp;
 {
 	register int flag;
 	
-	switch (sig) {
-		case SIGSEGV:
-			if (scp->sc_badvaddr == 0)
-				exitsh(ERROR);
-			if (setbrk(brkincr) == (unsigned char *)-1)
-				error(0, nospace, nospaceid);
+	if (sig == SIGALRM) {
+		if (sleeping)
 			return;
-		case SIGALRM:
-			if (sleeping)
-				return;
-			break;
 	}
 
-	if (trapcom[sig])
+	if (sig >= 0 && sig < MAXTRAP && trapcom[sig])
 		flag = TRAPSET;
 	else if (flags & subsh)
 		done(sig);
@@ -262,7 +239,8 @@
 	/* ignore SIGTERM, SIGQUIT, and SIGINT when "-i" option is used. */
 	if ( (flags&intflg)!=intflg || (sig!=SIGTERM && sig!=SIGQUIT && sig!=SIGINT))
 		trapnote |= flag;
-	trapflg[sig] |= flag;
+	if (sig >= 0 && sig < MAXTRAP)
+		trapflg[sig] |= flag;
 }
 
 int
@@ -293,56 +271,27 @@
 	}
 }
 
-#ifdef sgi
-/*
- * unwind so that we can do only 1 sigaction call per signal
- * this is called on each shell startup.
- */
 void
 stdsigs()
 {
 	register int	i;
-	sigset_t set, oset;
-	sigaction_t act, oact;
+	struct sigaction act, oact;
 
-	/*
-	 * block all signals so we can change to catch them - but
-	 * if they were ignored we can change them back without
-	 * getting a stray signal
-	 */
-	(void)sigfillset(&set);
-	sigprocmask(SIG_SETMASK, &set, &oset);
+	init_sigval();
 
 	(void)sigemptyset(&act.sa_mask);
 	act.sa_flags = 0;
 	for (i = 1; i < MAXTRAP; i++) {
 		if (sigval[i] == 0)
 			continue;
-		act.sa_handler = sigval[i];
-		(void)sigaction(i, &act, &oact);
-		if (i != SIGSEGV && oact.sa_handler == SIG_IGN) {
-			act.sa_handler = SIG_IGN;
-			(void)sigaction(i, &act, NULL);
-			trapflg[i] |= SIGIGN;
-		}
-	}
-	sigprocmask(SIG_SETMASK, &oset, NULL);
-}
-#else
-void
-stdsigs()
-{
-	register int	i;
-
-	for (i = 1; i < MAXTRAP; i++) {
-		if (sigval[i] == 0)
-			continue;
+		
 		if (i != SIGSEGV && ignoring(i))
 			continue;
-		handle(i, sigval[i]);
+
+		act.sa_handler = sigval[i];
+		(void)sigaction(i, &act, &oact);
 	}
 }
-#endif
 
 void
 oldsigs()
Binary files /home/mario/Downloads/original-bsh/fault.o and /home/mario/git/irish/fault.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/func.c /home/mario/git/irish/func.c
--- /home/mario/Downloads/original-bsh/func.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/func.c	2025-12-25 20:41:39.180036452 +0200
@@ -14,7 +14,7 @@
 
 #include	"defs.h"
 
-extern int	unlink();
+/* extern int	unlink(); */
 
 void	freefunc();
 void	prcmd();
@@ -150,7 +150,7 @@
 			newline();
 #endif
 
-			(void)unlink(iop->ioname);
+			(void)unlink((char *)iop->ioname);
 
 			if (fiotemp == iop)
 				fiotemp = iop->iolst;
@@ -189,7 +189,7 @@
 }
 
 
-static nonl = 0;
+static int nonl = 0;
 
 static	void
 prbgnlst()
@@ -213,6 +213,7 @@
 
 void
 prcmd(t)
+	struct trenod *t;
 {
 	nonl++;
 	prf(t);
Binary files /home/mario/Downloads/original-bsh/func.o and /home/mario/git/irish/func.o differ
Binary files /home/mario/Downloads/original-bsh/hash.o and /home/mario/git/irish/hash.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/hashserv.c /home/mario/git/irish/hashserv.c
--- /home/mario/Downloads/original-bsh/hashserv.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/hashserv.c	2025-12-25 20:41:39.180814015 +0200
@@ -92,7 +92,7 @@
 		h->cost = 0;
 	}
 
-	if (i = syslook(name, commands, no_commands))
+	if ((i = syslook(name, commands, no_commands)))
 	{
 		hentry.data = (BUILTIN | i);
 		count = 1;
@@ -261,7 +261,7 @@
 	h = hfind(name);
 
 	if (h && (h->data & FUNCTION)) {
-		if(i = syslook(name, commands, no_commands))
+		if((i = syslook(name, commands, no_commands)))
 			h->data = (BUILTIN|i);
 		else
 			h->data = NOTFOUND;
Binary files /home/mario/Downloads/original-bsh/hashserv.o and /home/mario/git/irish/hashserv.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/io.c /home/mario/git/irish/io.c
--- /home/mario/Downloads/original-bsh/io.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/io.c	2025-12-25 20:41:39.180814015 +0200
@@ -22,7 +22,7 @@
 
 extern int	close();
 extern int	pipe();
-extern int	write();
+/* extern int write(); */
 extern int	link();
 
 /* ========	input output and file copying ======== */
@@ -292,7 +292,7 @@
 		itos(serial++);
 		movstr(numbuf, tmpname);
 		i->iolink = make(tmpout);
-		(void)link(i->ioname, i->iolink);
+		(void)link((char *)i->ioname, (char *)i->iolink);
 
 		i = i->iolst;
 	}
Binary files /home/mario/Downloads/original-bsh/io.o and /home/mario/git/irish/io.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/jobs.c /home/mario/git/irish/jobs.c
--- /home/mario/Downloads/original-bsh/jobs.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/jobs.c	2025-12-25 20:41:39.180814015 +0200
@@ -12,7 +12,7 @@
  * Job control for UNIX Shell
  */
 
-#include	<sys/termio.h>
+#include	<termios.h>
 #include	<sys/types.h>
 #include	<sys/wait.h>
 #include	<sys/param.h>
@@ -20,11 +20,10 @@
 #include	<string.h>
 #include	<fcntl.h>
 #include	<errno.h>
-#include	<pfmt.h>
+#include	<stdio.h>
+#include    <unistd.h>
 #include	"defs.h"
 
-extern pid_t getpgid();
-extern int setpgid();
 extern int str2sig();
 extern int sig2str();
 
@@ -90,35 +89,10 @@
 static void	printjob();
 
 /*
-** Function: tcgetpgrp()
-** 
-** Notes: This function retrieves the process group id of the process
-** currently attached to the terminal.  The ioctl does not use
-** privilege.
-*/
-pid_t
-tcgetpgrp(fd)
-{
-	pid_t pgid;
-	if (ioctl(fd, TIOCGPGRP, &pgid) == 0)
-		return pgid;
-	return (pid_t)-1;
-}
-
-/*
-** Function: tcsetpgrp()
-** 
-** Notes: This function sets the process group id of the process
-** currently attached to the terminal.  The ioctl does not use
-** privilege.
-*/
-static int
-tcsetpgrp(fd, pgid)
-int fd;
-pid_t pgid;
-{
-	return ioctl(fd, TIOCSPGRP, &pgid);
-}
+ * tcgetpgrp/tcsetpgrp Replaced with standard POSIX calls.
+ * Previous implementation used ioctl(..., TIOCGPGRP/TIOCSPGRP).
+ * Included <unistd.h> to provide prototypes.
+ */
 
 /*
 ** Function: pgid2job()
@@ -152,7 +126,7 @@
 int mustbejob;
 {
 	register struct job *jp,*njp;
-	register i;
+	register int i;
 
 	if (*job != '%')
 		jp = pgid2job(stoi(job));
@@ -165,7 +139,7 @@
 		for (jp = joblst; jp && jp->j_jid != i; jp = jp->j_nxtp)
 			continue;
 	} else if (*job == '?') {
-		register j;
+		register int j;
 		register char *p;
 		i = strlen(++job);
 		jp = 0;
@@ -259,7 +233,7 @@
 		jp->j_pgid = getpgid(jp->j_pid);
 		jp->j_tgid = jp->j_pgid;
 		if (fg) {
-			if (tgid = settgid(mypgid, jp->j_pgid))
+			if ((tgid = settgid(mypgid, jp->j_pgid)))
 				jp->j_tgid = tgid;
 			else {
 				jp->j_flag |= J_SAVETTY;
@@ -324,10 +298,11 @@
 
 static void
 collectjobs(wnohang)
+int wnohang;
 {
 	pid_t pid;
 	register struct job *jp;
-	int stat, n;
+	int stat;
 
 #ifdef _sgi
 	/*
@@ -347,7 +322,7 @@
 #endif
 		if ((pid = waitpid(-1,&stat,wnohang|WUNTRACED|WCONTINUED)) <= 0)
 			break;
-		if (jp = pgid2job(pid))
+		if ((jp = pgid2job(pid)))
 			(void)statjob(jp,stat,0,0);
 	}
 
@@ -403,10 +378,12 @@
 	int done;
 	pid_t pid = jp->j_pid;
 
-	while (waitpid(pid, &stat, WUNTRACED|WNOWAIT) != pid)
-		continue;
+	while (waitpid(pid, &stat, WUNTRACED) != pid) {
+		if (errno == ECHILD)
+			break;
+		sigchk();
+	}
 	done = statjob(jp,stat,1,1);
-	waitpid(pid, 0, WUNTRACED);
 	if (done && exitval && (flags & errflg))
 		exitsh(exitval);
 	flags |= eflag;
@@ -445,6 +422,7 @@
 static void
 restartjob(jp,fg)
 register struct job *jp;
+int fg;
 {
 	if (jp != jobcur) {
 		register struct job *t;
@@ -458,7 +436,9 @@
 			jp->j_stty.c_lflag &= ~TOSTOP;
 			jp->j_stty.c_lflag |= (mystty.c_lflag&TOSTOP);
 			jp->j_stty.c_cc[VSUSP] = mystty.c_cc[VSUSP];
+#ifdef VDSUSP
 			jp->j_stty.c_cc[VDSUSP] = mystty.c_cc[VDSUSP];
+#endif
 			(void)tcsetattr(0,TCSADRAIN,&jp->j_stty);
 		}
 		(void)settgid(jp->j_tgid, mypgid);
@@ -486,6 +466,7 @@
 static void
 printjob(jp,propts)
 register struct job *jp;
+int propts;
 {
 	int sp = 0;
 
@@ -525,11 +506,8 @@
 			prc_buff(SP);
 		sp = 28;
 		if (jp->j_flag & J_SIGNALED) {
-			extern char *_sys_siglist[];
-			extern int _sys_nsig;
 			if (jp->j_xval < (ushort)_sys_nsig) {
-				const char *sig = __gtxt("uxlibc", jp->j_xval + 4,
-					_sys_siglist[jp->j_xval]);
+				const char *sig = _sys_siglist[jp->j_xval];
 				sp -= strlen(sig);
 				prs_buff(sig);
 			} else {
@@ -628,7 +606,7 @@
 endjobs(check_if)
 int check_if;
 {
-	if ((flags & (jcoff|jcflg)) != jcflg)
+	if ((flags & jcflg) != jcflg)
 		return 1;
 
 	if (check_if && jobcnt && eofflg++ == 0) {
@@ -680,7 +658,7 @@
 void
 allocjob(cmd, cwd, monitor)
 register char *cmd;
-register unchar *cwd;
+register unsigned char *cwd;
 int monitor;
 {
 	register struct job *jp,**jpp;
@@ -787,7 +765,7 @@
 int fg;
 {
 
-	register propts;
+	register int propts;
 
 	thisjob->j_nxtp = *nextjob;
 	*nextjob = thisjob;
@@ -836,7 +814,7 @@
 	extern int opterr;
 	register int cmd = SYSJOBS;
 	register struct job *jp;
-	register propts, c;
+	register int propts, c;
 	int savoptind = optind;
 	int loptind = -1;
 	int savopterr = opterr;
@@ -928,9 +906,9 @@
 char *argv[];
 {
 	register int	cmd;
-	register fg;
+	register int fg;
 
-	if (fg = eq("fg",argv[0]))
+	if ((fg = eq("fg",argv[0])))
 		cmd = SYSFG;
 	else
 		cmd = SYSBG;
@@ -965,7 +943,7 @@
 int argc;
 char *argv[];
 {
-	register int cmd = (int)*argv;
+	register int cmd = SYSWAIT;
 	register struct job *jp;
 	int stat;
 
@@ -1113,8 +1091,8 @@
 
 		if (argc == 2) {
 
-			register i;
-			register cnt = 0;
+			register int i;
+			register int cnt = 0;
 			register char sep = 0;
 			char buf[12];
 
Binary files /home/mario/Downloads/original-bsh/jobs.o and /home/mario/git/irish/jobs.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/libc.c /home/mario/git/irish/libc.c
--- /home/mario/Downloads/original-bsh/libc.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/libc.c	2025-12-25 20:41:39.180814015 +0200
@@ -1,62 +1,4 @@
-/*	Copyright (c) 1990, 1991 UNIX System Laboratories, Inc.	*/
-/*	Copyright (c) 1988 AT&T	*/
-/*	  All Rights Reserved  	*/
-
-/*	THIS IS UNPUBLISHED PROPRIETARY SOURCE CODE OF     	*/
-/*	UNIX System Laboratories, Inc.                     	*/
-/*	The copyright notice above does not evidence any   	*/
-/*	actual or intended publication of such source code.	*/
-
-/*
- * Sh includes a private IOB table since we don't need or want to
- * pull in the huge multihundred file IOB table from LIBC.
+/* 
+ * libc.c: SVR4 stdio internals.
+ * Removed for Linux port as it conflicts with glibc.
  */
-
-#define MFILES	3
-#define	SMBUFSZ	8
-
-#define	_NFILE	MFILES
-#include <stdio.h>
-#include <sys/types.h>
-
-#pragma weak __iob = _iob
-
-unsigned char _smbuf[_NFILE][SMBUFSZ] = { 0 };
-unsigned char _bufendadj[_NFILE] = { 0 };
-unsigned char _bufdirtytab[_NFILE] = { 0 };
-unsigned char *_bufendtab[_NFILE] = { &_smbuf[0][SMBUFSZ], &_smbuf[1][SMBUFSZ],
-		&_smbuf[2][SMBUFSZ] };
-
-FILE _iob[_NFILE] = {
-#if _MIPS_SIM == _ABIN32
-	{ 0, _smbuf[0], _smbuf[0], _IOREAD+_IONBF, 0, 0},
-	{ 0, _smbuf[1], _smbuf[1],  _IOWRT+_IONBF, 1, 1},
-	{ 0, _smbuf[2], _smbuf[2],  _IOWRT+_IONBF, 2, 2},
-#else
-	{ 0, _smbuf[0], _smbuf[0], _IOREAD+_IONBF, 0},
-	{ 0, _smbuf[1], _smbuf[1],  _IOWRT+_IONBF, 1},
-	{ 0, _smbuf[2], _smbuf[2],  _IOWRT+_IONBF, 2},
-#endif
-};
-
-FILE *_lastbuf = &_iob[_NFILE];
-
-/*
- * sh doesn't use private exit ops
- */
-atexit(void *func)
-{
-	abort();
-}
-
-void
-_exithandle(void)
-{
-	return;
-}
-
-void
-__eachexithandle(void)
-{
-	return;
-}
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/macro.c /home/mario/git/irish/macro.c
--- /home/mario/Downloads/original-bsh/macro.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/macro.c	2025-12-25 20:41:39.181814018 +0200
@@ -44,14 +44,14 @@
 					pushstak('\\'); 
 					pc = readw(d); 
 					/* push entire multibyte char */
-					while(d = *pc++)
+					while((d = *pc++))
 						pushstak(d);
 				} else
 					pushstak(d);
 			} else { /* push escapes onto stack to quote characters */
 				pc = readw(c); 
 				pushstak('\\');
-				while(c = *pc++)
+				while((c = *pc++))
 					pushstak(c);
 			}
 		} else if(c == '\\') {
@@ -124,7 +124,7 @@
 			unsigned char		idb[2];
 			unsigned char		*id = idb;
 
-			if (bra = (c == BRACE))
+			if ((bra = (c == BRACE)))
 				c = readc();
 			if (letter(c))
 			{
@@ -157,7 +157,7 @@
 					c = '1';
 				}
 				c -= '0';
-				v = ((c == 0) ? cmdadr : ((int)c <= dolc) ? dolv[c] : (unsigned char *)(dolg = 0));
+				v = ((c == 0) ? cmdadr : ((int)c <= dolc) ? dolv[c] : (unsigned char *)(long)(dolg = 0));
 			}
 			else if (c == '$')
 				v = pidadr;
@@ -248,7 +248,7 @@
 							pushstak('\0');
 						}
 						else
-							while (c = *v++) {
+							while ((c = *v++)) {
 								if(quote || (c == '\\' && trimflag)) {
 									register int length;
 									wchar_t l;
@@ -306,7 +306,7 @@
 					 * do assignment 
 					 */
 						usestak();
-						while(c = *argp++) {
+						while((c = *argp++)) {
 							if(c == '\\' && trimflag) {
 								c = *argp++;
 								if(!c)
@@ -433,14 +433,14 @@
 	tdystak(savptr);
 	memcpy(stakbot, savptr, strlngth);
 	oldstaktop = staktop = stakbot + strlngth;
-	while (d = readc()) {
+	while ((d = readc())) {
 		if(quote || (d == '\\' && trimflag)) {
 			register unsigned char *rest;
 			/* quote output from command subst. if within double 
 			   quotes or backslash part of output */
 			rest = readw(d);
 			pushstak('\\');
-			while(d = *rest++)
+			while((d = *rest++))
 			/* Pick up all of multibyte character */
 				pushstak(d);
 		}
@@ -450,7 +450,7 @@
 	{
 		extern pid_t parent;
 		int stat;
-		register rc;
+		register int rc;
 		while (waitpid(parent,&stat,0) != parent)
 			continue;
 		if (WIFEXITED(stat))
@@ -490,7 +490,7 @@
 	/*
 	 * DQUOTE used to stop it from quoting
 	 */
-	while (c = (getch(DQUOTE, 0))) /* read characters from here document 
+	while ((c = (getch(DQUOTE, 0)))) /* read characters from here document 
 				       and interpret them */
 	{
 		if(c == '\\') {
@@ -512,6 +512,7 @@
 
 static void
 flush(ot)
+int ot;
 {
 	(void)write(ot, stakbot, staktop - stakbot);
 	if (flags & execpr)
Binary files /home/mario/Downloads/original-bsh/macro.o and /home/mario/git/irish/macro.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/main.c /home/mario/git/irish/main.c
--- /home/mario/Downloads/original-bsh/main.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/main.c	2025-12-25 20:41:39.181814018 +0200
@@ -25,7 +25,7 @@
 #include	<sys/types.h>
 #include	<sys/stat.h>
 #include	<sys/wait.h>
-#include	<pfmt.h>
+#include	<stdio.h> /* Replaced pfmt.h */
 #include	"hash.h"
 #include        "dup.h"
 
@@ -66,22 +66,25 @@
 static void	chkmail();
 
 extern int close();
-extern int fcntl();
+/* extern int fcntl(); */
 extern int setgid();
 extern int setuid();
 extern uid_t getgid();
 extern uid_t getegid();
 extern uid_t getuid();
 extern uid_t geteuid();
+int _sp;
 extern pid_t getpid();
 extern pid_t getsid();
 extern pid_t getpgid();
 
+int
 main(c, v, e)
 int	c;
 char	*v[];
 char	*e[];
 {
+	sh_environ = (unsigned char **)e;
 	register int	rflag = ttyflg;
 	int		rsflag = 1;	/* local restricted flag */
 	register unsigned char *flagc = flagadr;
@@ -98,7 +101,7 @@
 	 * initialize storage allocation
 	 */
 
-	stakbot = 0;
+	/* stakbot = 0; - Removed for POSIX port with fixed buffer stak.c */
 	addblok((unsigned)0);
 
 	(void)setlocale(LC_MESSAGES, "");
@@ -149,7 +152,7 @@
 	 *  the simple file part of the value.
 	 *  is rsh
 	 */
-	if (n = findnam("SHELL"))
+	if ((n = findnam("SHELL")))
 	{
 		if (eq("rsh", simple(n->namval)))
 			rsflag = 0;
@@ -193,7 +196,7 @@
 	 *      arbitrary and doesn't agree with any recognized
 	 *      conventions in IRIX.
 	 */
-	if ((flags & privflg) == 0) {
+	if (1) { /* privflg removed */
 		register uid_t euid;
 		register gid_t egid;
 		register uid_t ruid;
@@ -267,7 +270,7 @@
 	
 	if ((beenhere++) == FALSE)	/* ? profile */
 	{
-		if (*(simple(cmdadr)) == '-' && (flags & privflg) == 0)
+		if (*(simple(cmdadr)) == '-') /* privflg removed */
 		{			/* system profile */
 
 #ifndef RES
@@ -394,6 +397,8 @@
 		}
 
 		trapnote = 0;
+		if (flags & prompt)
+			flushb();
 		peekc = readc();
 		if (eof) {
 			if (endjobs(JOB_STOPPED))
@@ -576,6 +581,7 @@
 
 void
 setmode(prof)
+int prof;
 {
 	/*
 	 * decide whether interactive
Binary files /home/mario/Downloads/original-bsh/main.o and /home/mario/git/irish/main.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/Makefile /home/mario/git/irish/Makefile
--- /home/mario/Downloads/original-bsh/Makefile	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/Makefile	2025-12-25 20:41:39.180036452 +0200
@@ -1,48 +1,23 @@
-#!smake
-#ident	"$Revision: 1.54 $"
+# Makefile for porting IRIX 6.5.17 sh to Linux
 
-OBJECT_STYLE=N32_M3
-VLLDLIBS=-L$(ROOT)/usr/lib32/mips3/nonshared -L$(ROOT)/usr/lib32/nonshared -lgen -lw -lc_nomp
-VLCOPTS=-woff 1116
-WANTPARALLEL=yes-please
-
-include	$(ROOT)/usr/include/make/commondefs
-
-# Compile Time Options
-#
-#	-DNICE		if defined then a backround process will be
-#			niced down to NICE.  
-#	-DACCT		if defined, then shell accounting will be done.
-#			Note that the rule line for service.o needs to
-#			be modified if this is included.
-#
-
-TARGETS=bsh 
-
-CFILES =  args.c blok.c cmd.c ctype.c \
-	defs.c echo.c error.c expand.c \
-	fault.c func.c hash.c hashserv.c io.c macro.c main.c msg.c name.c \
-	print.c pwd.c service.c setbrk.c stak.c string.c test.c word.c \
-	xec.c bltin.c jobs.c ulimit.c resource.c libc.c
-
-GLDOPTS=
-LCOPTS=-G 4 -non_shared -use_readonly_const $(VLCOPTS)
-# Link text and data close together.
-LLDOPTS=-Wl,-T,10000000,-rdata_shared
-
-LLDLIBS=-nostdlib $(VLLDLIBS)
-LCDEFS= -DACCT
-
-default: $(TARGETS)
-
-include $(COMMONRULES)
-
-install: default
-	$(INSTALL) -F /sbin bsh
-	$(INSTALL) -F /sbin -lns bsh jsh
-	$(INSTALL) -F /usr/bin -lns ../../sbin/bsh jsh
-	$(INSTALL) -F /usr/bin -lns ../../sbin/bsh bsh
-
-bsh: ${OBJECTS}
-	${CCF} ${OBJECTS} ${LDFLAGS} -o $@.precord
-	${CORD} $@.precord $@.fb -o $@
+CC = gcc
+CFLAGS = -g -Wall -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -I. -DDIRTY -D_sgi -Dsgi
+LDFLAGS = 
+
+OBJS = args.o blok.o cmd.o ctype.o defs.o echo.o error.o expand.o \
+       fault.o func.o hash.o hashserv.o io.o macro.o main.o msg.o name.o \
+       print.o pwd.o service.o stak.o string.o test.o word.o \
+       xec.o bltin.o jobs.o ulimit.o resource.o compat.o
+
+PROG = sh
+
+all: $(PROG)
+
+$(PROG): $(OBJS)
+	$(CC) $(CFLAGS) -o $@ $(OBJS) $(LDFLAGS)
+
+%.o: %.c
+	$(CC) $(CFLAGS) -c $< -o $@
+
+clean:
+	rm -f $(OBJS) $(PROG)
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/mode.h /home/mario/git/irish/mode.h
--- /home/mario/Downloads/original-bsh/mode.h	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/mode.h	2025-12-25 20:41:39.181814018 +0200
@@ -12,7 +12,7 @@
  *	UNIX shell
  */
 
-#include <sgidefs.h>
+/* #include <sgidefs.h> */ /* IRIX specific */
 
 #ifdef pdp11
 typedef char BOOL;
@@ -21,11 +21,7 @@
 #endif
 
 
-#if (_MIPS_SIM == _MIPS_SIM_ABI32)
-#define ALIGN		4
-#else
 #define ALIGN		8
-#endif
 #define BYTESPERWORD	(sizeof (char *))
 #define	NIL	((char*)0)
 
@@ -35,7 +31,7 @@
  * into an Rvalue so two cheats
  * are necessary, one for each context.
  */
-#define Rcheat(a)	((int)(a))
+#define Rcheat(a)	((intptr_t)(a))
 
 
 /* address puns for storage allocation */
@@ -55,13 +51,13 @@
 } address;
 
 
-/* heap storage */
+#include <stdint.h>
 struct blk
 {
 	union {
 	struct blk	*word;
 #if (_MIPS_SIM == _MIPS_SIM_NABI32)
-	__uint64_t	pad;
+	uint64_t	pad;
 #endif
         } ag; 
 };
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/msg.c /home/mario/git/irish/msg.c
--- /home/mario/Downloads/original-bsh/msg.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/msg.c	2025-12-25 20:41:39.181814018 +0200
@@ -15,41 +15,16 @@
 
 #include	"defs.h"
 #include	"sym.h"
-#ifdef sgi
-#include	<msgs/uxsgicore.h>
-#endif
+#include	"defs.h"
+#include	"sym.h"
 
 /*
  * error messages
  */
-const char	getpriv[]	= "Cannot retrieve process privileges";
-const char	getprivid[]	= ":825";
-const char	rstpriv[]	= "Cannot restore process privileges";
-const char	rstprivid[]	= ":826";
-const char	setprv[]	= "Cannot turn on privilege";
-const char	setprvid[]	= ":827";
-const char	clrprv[]	= "Cannot turn off privilege";
-const char	clrprvid[]	= ":828";
-const char	setnam[]	= "Unrecognized privilege set name";
-const char	setnamid[]	= ":829";
-const char	prvnam[]	= "Unrecognized privilege name";
-const char	prvnamid[]	= ":830";
+/* Privilege/MLD messages removed for POSIX port */
 const char	nopset[]	= "No privilege set specified";
 const char	nopsetid[]	= ":831";
-const char	prvunsup[]	= "System does not support privilege!";
-const char	prvunsupid[]	= ":832";
-const char	mldusage[]	= "mldmode [-r | -v] [string]";
-const char	mldusageid[]	= ":893";
-const char	nosetmode[]	= "Cannot set multilevel mode";
-const char	nosetmodeid[]	= ":834";
-const char	nogetmode[]	= "Cannot obtain multilevel mode";
-const char	nogetmodeid[]	= ":835";
-const char	notsupport[]	= "System service not installed";
-const char	notsupportid[]	= ":836";
-const char	invalcomb[]	= "Invalid combination of options -r & -v.";
-const char	invalcombid[]	= ":837";
-const char	mldmodeis[]	= "multilevel mode=";
-const char	mldmodeisid[]	= ":838";
+
 const char	badopt[]	= "Bad option(s)";
 const char	badoptid[]	= ":486";
 const char	mailmsg[]	= "You have mail\n";
@@ -177,13 +152,13 @@
 const char loginshid[]		= ":538";
 #ifdef sgi
 const char nosuid[]		= "Setuid program execute permission denied";
-const char nosuidid[]		= _SGI_MMX_sh_suideperm;
+const char nosuidid[]		= ":000";
 const char badmagic[]		= "Program not supported by architecture";
-const char badmagicid[]		= _SGI_MMX_sh_badmagic;
+const char badmagicid[]		= ":000";
 const char nosuchres[]		= "No such resource";
 const char nosuchresid[]	= ":510";
 const char badscale[]		= "Improper or unknown scale factor";
-const char badscaleid[]		= _SGI_MMX_sh_unknscale;
+const char badscaleid[]		= ":000";
 #endif
 
 /*
@@ -292,16 +267,12 @@
 	{ "kill",	SYSKILL },
 #ifdef RES
 	{ "login",	SYSLOGIN },
-	{ "mldmode",	SYSMLD },
 	{ "newgrp",	SYSLOGIN },
 #else
 #ifdef sgi
-	{ "limit",	SYSLIMIT },
 #endif
-	{ "mldmode",	SYSMLD },
 	{ "newgrp",	SYSNEWGRP },
 #endif
-	{ "priv",	SYSPRIV },
 	{ "pwd",	SYSPWD },
 	{ "read",	SYSREAD	},
 	{ "readonly",	SYSRDONLY },
@@ -320,7 +291,6 @@
 	{ "ulimit",	SYSULIMIT },
 	{ "umask",	SYSUMASK },
 #ifdef sgi
-	{ "unlimit",	SYSUNLIMIT },
 #endif
 #endif
 
Binary files /home/mario/Downloads/original-bsh/msg.o and /home/mario/git/irish/msg.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/name.c /home/mario/git/irish/name.c
--- /home/mario/Downloads/original-bsh/name.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/name.c	2025-12-25 20:41:39.181814018 +0200
@@ -15,7 +15,7 @@
  * UNIX shell
  */
 
-#include	<pfmt.h>
+/* #include	<pfmt.h> */
 #include	"hash.h"
 #include	"defs.h"
 
@@ -39,7 +39,7 @@
 static void	pushnam();
 static void	setname();
 static BOOL	chkid();
-static int	patheq();
+/* static int	patheq(); */
 
 struct namnod ps2nod =
 {
@@ -311,7 +311,7 @@
 static void
 set_builtins_path()
 {
-        register unsigned char *path;
+        /* register unsigned char *path; */
 
         ucb_builtins = 0;
 #ifdef sgi
@@ -332,6 +332,7 @@
 #endif
 }
  
+/*
 static int
 patheq(component, dir)
 register unsigned char   *component;
@@ -343,13 +344,14 @@
         {
                 c = *component++;
                 if (c == COLON)
-                        c = '\0';       /* end of component of path */
+                        c = '\0';       // end of component of path
                 if (c != *dir++)
                         return(0);
                 if (c == '\0')
                         return(1);
         }
 }
+*/
 
 int 
 readvar(names)
@@ -380,7 +382,7 @@
 			break;
 		rest = readw(d);
 		pc = c;
-		while(*pc++ = *rest++);
+		while((*pc++ = *rest++));
 		if(!anys(c, ifsnod.namval))
 			break;
 	}
@@ -413,7 +415,7 @@
 						break;
 					rest = readw(d);
 					pc = c;
-					while(*pc++ = *rest++);
+					while((*pc++ = *rest++));
 					if(!anys(c, ifsnod.namval))
 						break;
 				}
@@ -423,14 +425,14 @@
 			if(d == '\\') {
 				d = readc();
 				rest = readw(d);
-				while(d = *rest++)
+				while((d = *rest++))
 					pushstak(d);
 				oldstak = staktop;
 			}
 			else
 			{
 				pc = c;
-				while(d = *pc++) 
+				while((d = *pc++)) 
 					pushstak(d);
 				if(!anys(c, ifsnod.namval))
 					oldstak = staktop;
@@ -443,7 +445,7 @@
 			{
 				rest = readw(d);
 				pc = c;
-				while(*pc++ = *rest++);
+				while((*pc++ = *rest++));
 			}
 		}
 	}
@@ -584,7 +586,7 @@
 		prf(n->namenv);
 		prc_buff(NL);
 	}
-	else if (s = n->namval)
+	else if ((s = n->namval))
 	{
 		prs_buff(n->namid);
 		prc_buff('=');
@@ -725,7 +727,7 @@
 {
 	register struct namnod	*n;
 
-	if (n = findnam(name))
+	if ((n = findnam(name)))
 	{
 		if (n->namflg & N_RDONLY)
 			failed(0, name, wtfailed, wtfailedid);
Binary files /home/mario/Downloads/original-bsh/name.o and /home/mario/git/irish/name.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/print.c /home/mario/git/irish/print.c
--- /home/mario/Downloads/original-bsh/print.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/print.c	2025-12-25 20:41:39.181814018 +0200
@@ -15,7 +15,7 @@
 
 #include	"defs.h"
 #include	<sys/param.h>
-#include	<pfmt.h>
+/* #include	<pfmt.h> */
 
 #define		BUFLEN		256
 
@@ -23,7 +23,7 @@
 
 static unsigned char buffer[BUFLEN];
 static unsigned char *bufp = buffer;
-static int index = 0;
+static int buff_buff_index = 0;
 static int buffd = 1;
 
 void	prc_buff();
@@ -42,7 +42,7 @@
 
 static unsigned char *octal();
 
-extern int write();
+/* extern int write(); */
 extern int wisprint();
 
 /*
@@ -110,6 +110,7 @@
 
 void
 itos(n)
+int n;
 {
 	unsigned char *abuf;
 	unsigned a;
@@ -181,11 +182,11 @@
 void
 flushb()
 {
-	if (index)
+	if (buff_buff_index)
 	{
-		bufp[index] = '\0';
+		bufp[buff_buff_index] = '\0';
 		(void)write(buffd, bufp, length(bufp) - 1);
-		index = 0;
+		buff_buff_index = 0;
 	}
 }
 
@@ -195,10 +196,10 @@
 {
 	if (c)
 	{
-		if (buffd != -1 && index + 1 >= BUFLEN)
+		if (buffd != -1 && buff_buff_index + 1 >= BUFLEN)
 			flushb();
 
-		bufp[index++] = c;
+		bufp[buff_buff_index++] = c;
 	}
 	else
 	{
@@ -213,15 +214,15 @@
 {
 	register int len = length(s) - 1;
 
-	if (buffd != -1 && index + len >= BUFLEN)
+	if (buffd != -1 && buff_buff_index + len >= BUFLEN)
 		flushb();
 
 	if (buffd != -1 && len >= BUFLEN)
 		(void)write(buffd, s, len);
 	else
 	{
-		movstr(s, &bufp[index]);
-		index += len;
+		movstr(s, &bufp[buff_buff_index]);
+		buff_buff_index += len;
 	}
 }
 
@@ -324,16 +325,16 @@
 	int ofd;
 
 	if ((ofd = buffd) == -1) {
-		if (bufp[index-1])
-			bufp[index++] = 0;
-		(void)endstak(bufp+index);
+		if (bufp[buff_buff_index-1])
+			bufp[buff_buff_index++] = 0;
+		(void)endstak(bufp+buff_buff_index);
 	} else
 		flushb();
 	if ((buffd = fd) == -1)
 		bufp = locstak();
 	else
 		bufp = buffer;
-	index = 0;
+	buff_buff_index = 0;
 	return ofd;
 }
 
Binary files /home/mario/Downloads/original-bsh/print.o and /home/mario/git/irish/print.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/pwd.c /home/mario/git/irish/pwd.c
--- /home/mario/Downloads/original-bsh/pwd.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/pwd.c	2025-12-25 20:41:39.181814018 +0200
@@ -73,9 +73,9 @@
 	/* take care of trailing /. */
 	if(*(--pdir)==DOT && pdir > dir && *(--pdir)==SLASH) {
 		if(pdir > dir) {
-			*pdir = NULL;
+			*pdir = 0;
 		} else {
-			*(pdir+1) = NULL;
+			*(pdir+1) = 0;
 		}
 	
 	}
@@ -86,7 +86,7 @@
 
 	/* Now that the dir is canonicalized, process it */
 
-	if(*dir==DOT && *(dir+1)==NULL)
+	if(*dir==DOT && *(dir+1)==0)
 	{
 		return;
 	}
@@ -115,7 +115,7 @@
 	{
 		if(*dir==DOT && 
 		   *(dir+1)==DOT &&
-		   (*(dir+2)==SLASH || *(dir+2)==NULL))
+		   (*(dir+2)==SLASH || *(dir+2)==0))
 		{
 			/* Parent directory, so backup one */
 
@@ -161,14 +161,14 @@
 		didpwd=FALSE;
 		return;
 	}
-	*pcwd = NULL;
+	*pcwd = 0;
 
 	--pcwd;
 	if(pcwd>cwdname && *pcwd==SLASH)
 	{
 		/* Remove trailing / */
 
-		*pcwd = NULL;
+		*pcwd = 0;
 	}
 	return;
 }
@@ -279,7 +279,7 @@
 	{
 		/* Remove trailing / */
 
-		*pstring = NULL;
+		*pstring = 0;
 	}
 	return;
 }
Binary files /home/mario/Downloads/original-bsh/pwd.o and /home/mario/git/irish/pwd.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/resource.c /home/mario/git/irish/resource.c
--- /home/mario/Downloads/original-bsh/resource.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/resource.c	2025-12-25 20:41:39.181814018 +0200
@@ -6,40 +6,40 @@
 
 #ident	"$Revision: 1.10 $"
 
-#ifdef sgi
+
 
 #include "defs.h"
 #include <sys/resource.h>
 #include <sys/types.h>
-#include <sys/syssgi.h>
+
 #include <unistd.h>
 
 static struct limits *findlim(unsigned char *);
-static __int64_t getval (register struct limits *lp, unsigned char **v);
-static limtail(unsigned char *, unsigned char *);
-static plim(register struct limits *lp, char hard);
-static setlim(register struct limits *lp, char hard, rlim64_t limit);
-static psecs(__int64_t);
-static p2dig(__int64_t);
-static prefix(unsigned char *, unsigned char *);
+static int64_t getval (register struct limits *lp, unsigned char **v);
+static int limtail(unsigned char *, unsigned char *);
+static int plim(register struct limits *lp, char hard);
+static int setlim(register struct limits *lp, char hard, rlim_t limit);
+static int psecs(int64_t);
+static int p2dig(int64_t);
+static int prefix(unsigned char *, unsigned char *);
 
 
 static int command;
-static struct limits {
-	int	limconst;
-	unsigned char	*limname;
-	int	limdiv;
-	char	*limscale;
-} limits[] = {
-	RLIMIT_CPU,	"cputime",	1,	"seconds",
-	RLIMIT_FSIZE,	"filesize",	1024,	"kbytes",
-	RLIMIT_DATA,	"datasize",	1024,	"kbytes",
-	RLIMIT_STACK,	"stacksize",	1024,	"kbytes",
-	RLIMIT_CORE,	"coredumpsize",	1024,	"kbytes",
-	RLIMIT_RSS,	"memoryuse",	1024,	"kbytes",
-	RLIMIT_NOFILE,	"descriptors",	1,	"",
-	RLIMIT_VMEM,	"vmemory",	1024,	"kbytes",
-	-1,		0,
+static struct limits { 
+	int limconst; 
+	unsigned char *limname; 
+	int limdiv; 
+	char *limscale; 
+} limits[] = { 
+	{RLIMIT_CPU, (unsigned char *)"cputime", 1, "seconds"}, 
+	{RLIMIT_FSIZE, (unsigned char *)"filesize", 1024, "kbytes"}, 
+	{RLIMIT_DATA, (unsigned char *)"datasize", 1024, "kbytes"}, 
+	{RLIMIT_STACK, (unsigned char *)"stacksize", 1024, "kbytes"}, 
+	{RLIMIT_CORE, (unsigned char *)"coredumpsize", 1024, "kbytes"}, 
+	{RLIMIT_RSS, (unsigned char *)"memoryuse", 1024, "kbytes"}, 
+	{RLIMIT_NOFILE, (unsigned char *)"descriptors", 1, ""}, 
+	{RLIMIT_AS, (unsigned char *)"vmemory", 1024, "kbytes"}, 
+	{-1, 0, 0, 0} 
 };
 
 static struct limits *
@@ -58,15 +58,15 @@
 	if (res)
 		return (res);
 	error(command, nosuchres, nosuchresid);
-
-	/*NOTREACHED*/
+	return(0);
 }
 
+int
 dolimit(v)
 	register unsigned char **v;
 {
 	register struct limits *lp;
-	register rlim64_t limit;
+	register rlim_t limit;
 	char hard = 0;
 
 	command = SYSLIMIT;
@@ -78,19 +78,20 @@
 	if (*v == 0) {
 		for (lp = limits; lp->limconst >= 0; lp++)
 			plim(lp, hard);
-		return;
+		return(0);
 	}
 	lp = findlim(v[0]);
 	if (v[1] == 0) {
 		plim(lp,  hard);
-		return;
+		return(0);
 	}
 	limit = getval(lp, v+1);
 	if (setlim(lp, hard, limit) < 0)
 		exitsh(ERROR);
+	return(0);
 }
 
-static long long
+static int64_t
 getval(lp, v)
 	register struct limits *lp;
 	unsigned char **v;
@@ -103,7 +104,7 @@
 		cp++;
 	if (*cp == 0) {
 		if (*v == 0)
-			return ((long long)(f+0.5) * lp->limdiv);
+			return ((int64_t)(f+0.5) * lp->limdiv);
 		cp = *v;
 	}
 	switch (*cp) {
@@ -111,18 +112,18 @@
 	case ':':
 		if (lp->limconst != RLIMIT_CPU)
 			goto badscal;
-		return ((long long)(f * 60.0 + atof((const char *)cp+1)));
+		return ((int64_t)(f * 60.0 + atof((const char *)cp+1)));
 
 	case 'h':
 		if (lp->limconst != RLIMIT_CPU)
 			goto badscal;
-		limtail(cp, "hours");
+		limtail(cp, (unsigned char *)"hours");
 		f *= 3600.;
 		break;
 
 	case 'm':
 		if (lp->limconst == RLIMIT_CPU) {
-			limtail(cp, "minutes");
+			limtail(cp, (unsigned char *)"minutes");
 			f *= 60.;
 			break;
 		}
@@ -130,35 +131,35 @@
 		if (lp->limconst == RLIMIT_CPU)
 			goto badscal;
 		*cp = 'm';
-		limtail(cp, "megabytes");
+		limtail(cp, (unsigned char *)"megabytes");
 		f *= 1024.*1024.;
 		break;
 
 	case 's':
 		if (lp->limconst != RLIMIT_CPU)
 			goto badscal;
-		limtail(cp, "seconds");
+		limtail(cp, (unsigned char *)"seconds");
 		break;
 
 	case 'k':
 		if (lp->limconst == RLIMIT_CPU)
 			goto badscal;
-		limtail(cp, "kbytes");
+		limtail(cp, (unsigned char *)"kbytes");
 		f *= 1024;
 		break;
 
 	case 'u':
 		limtail(cp, (unsigned char *)gettxt(":557", "unlimited"));
-		return (RLIM64_INFINITY);
+		return (RLIM_INFINITY);
 
 	default:
 badscal:
 		error(command, badscale, badscaleid);
 	}
-	return ((long long)(f+0.5));
+	return ((int64_t)(f+0.5));
 }
 
-static
+static int
 limtail(cp, str0)
 	unsigned char *cp, *str0;
 {
@@ -168,30 +169,33 @@
 		cp++, str++;
 	if (*cp)
 		error(command, badscale, badscaleid);
+	return(0);
 }
 
-static
+static int
 plim(register struct limits *lp, char hard)
 {
-	struct rlimit64 rlim;
-	rlim64_t limit;
+	struct rlimit rlim;
+	rlim_t limit;
 
 	prs_buff(lp->limname);
 	prs_buff(" \t");
-	(void) getrlimit64(lp->limconst, &rlim);
+	(void) getrlimit(lp->limconst, &rlim);
 	limit = hard ? rlim.rlim_max : rlim.rlim_cur;
-	if (limit == RLIM64_INFINITY)
+	if (limit == RLIM_INFINITY)
 		prs_buff(gettxt(":557", "unlimited"));
 	else if (lp->limconst == RLIMIT_CPU)
 		psecs(limit);
 	else {
-		prll_buff(limit/lp->limdiv);
+		prn_buff(limit/lp->limdiv);
 		prc_buff(' ');
 		prs_buff(lp->limscale);
 	}
 	prc_buff(NL);
+	return(0);
 }
 
+int
 dounlimit(v)
 	register unsigned char **v;
 {
@@ -207,37 +211,38 @@
 	}
 	if (*v == 0) {
 		for (lp = limits; lp->limconst >= 0; lp++)
-			if (setlim(lp, hard, (rlim64_t)RLIM64_INFINITY) < 0)
+			if (setlim(lp, hard, (rlim_t)RLIM_INFINITY) < 0)
 				err++;
 		if (err)
 			exitsh(ERROR);
-		return;
+		return(0);
 	}
 	while (*v) {
 		lp = findlim(*v++);
-		if (setlim(lp, hard, (rlim64_t)RLIM64_INFINITY) < 0)
+		if (setlim(lp, hard, (rlim_t)RLIM_INFINITY) < 0)
 			exitsh(ERROR);
 	}
+	return(0);
 }
 
-static
-setlim(register struct limits *lp, char hard, rlim64_t limit)
+static int
+setlim(register struct limits *lp, char hard, rlim_t limit)
 {
-	struct rlimit64 rlim;
+	struct rlimit rlim;
 
-	(void) getrlimit64(lp->limconst, &rlim);
+	(void) getrlimit(lp->limconst, &rlim);
 	if (hard)
 		rlim.rlim_max = limit;
-  	else if (limit == RLIM64_INFINITY && geteuid() != 0)
+  	else if (limit == RLIM_INFINITY && geteuid() != 0)
  		rlim.rlim_cur = rlim.rlim_max;
  	else
  		rlim.rlim_cur = limit;
-	if (setrlimit64(lp->limconst, &rlim) < 0) {
+	if (setrlimit(lp->limconst, &rlim) < 0) {
 		unsigned char errstr[50], *cp = errstr;
 
 		cp = movstr(lp->limname, cp);
 		cp = movstr(": Can't ", cp);
-		if (limit == RLIM64_INFINITY)
+		if (limit == RLIM_INFINITY)
 			cp = movstr("remove ", cp);
 		else
 			cp = movstr("set ", cp);
@@ -250,36 +255,38 @@
 	return (0);
 }
 
-static
-psecs(__int64_t l)
+static int
+psecs(int64_t l)
 {
-	register __int64_t i;
+	register int64_t i;
 
 	i = l / 3600;
 	if (i) {
-		prll_buff(i);
+		prn_buff(i);
 		prc_buff(':');
 		i = l % 3600;
-		p2dig((__int64_t)(i / 60));
+		p2dig((int64_t)(i / 60));
 		goto minsec;
 	}
 	i = l;
-	prll_buff(i / 60);
+	prn_buff(i / 60);
 minsec:
 	i %= 60;
 	prc_buff(':');
 	p2dig(i);
+	return(0);
 }
 
-static
-p2dig(register __int64_t i)
+static int
+p2dig(register int64_t i)
 {
 
-	prll_buff((__int64_t)(i / 10));
-	prll_buff((__int64_t)(i % 10));
+	prn_buff((int64_t)(i / 10));
+	prn_buff((int64_t)(i % 10));
+	return(0);
 }
 
-static
+static int
 prefix(sub, str)
 	register unsigned char *sub, *str;
 {
@@ -295,4 +302,4 @@
 }
 
 
-#endif	/* sgi */
+
Binary files /home/mario/Downloads/original-bsh/resource.o and /home/mario/git/irish/resource.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/service.c /home/mario/git/irish/service.c
--- /home/mario/Downloads/original-bsh/service.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/service.c	2025-12-25 20:41:39.181814018 +0200
@@ -17,8 +17,6 @@
 #include	<fcntl.h>
 #include	<memory.h>
 
-#define ARGMK	01
-
 void	execa();
 void	trim();
 void	suspacct();
@@ -82,7 +80,7 @@
 						*/
 
 				fd = chkopen(tmpout);
-				(void)unlink(tmpout);
+				(void)unlink((char *)tmpout);
 			}
 			else if (iof & IOMOV)
 			{
@@ -159,6 +157,7 @@
 		} else
 			return(cpystak(path));
 	}
+	return((unsigned char *)0);
 	/*NOTREACHED*/
 }
 
@@ -247,7 +246,7 @@
 			(void)execs(path, t);
 			path = getpath(*t);
 		}
-		while (path = execs(path,t))
+		while ((path = execs(path,t)))
 			;
 #ifdef sgi
 		if (suidscript)
@@ -269,7 +268,7 @@
 	trim(p = curstak());
 	sigchk();
 	
-	(void)execve(p, &t[0] ,xecenv);
+	(void)execve((char *)p, (char **)t ,(char **)xecenv);
 	switch (errno)
 	{
 	case ENOEXEC:		/* could be a shell script */
@@ -356,11 +355,11 @@
 	if (current)
 	{
 		last = at;
-		while (c = *current++)
+		while ((c = *current++))
 		{
 			if(c == '\\')  { /* remove \ and quoted nulls */
 				nosubst = 1;
-				if(c = *current++)
+				if((c = *current++))
 					*last++ = c;
 			} else
 				*last++ = c;
@@ -383,7 +382,7 @@
 	if (current)
 	{
 		last = at;
-		while (c = *current++)
+		while ((c = *current++))
 		{
 			if(c == '\\')  { /* remove \ and quoted nulls */
 				if((c = *current++)=='/')
@@ -509,7 +508,7 @@
 		register int length;
 		sigchk();
 		argp = locstak() + BYTESPERWORD;
-		while (c = *s) { 
+		while ((c = *s)) { 
 			wchar_t l;
 			length = mbtowc(&l, (char *)s, MULTI_BYTE_MAX);
 			if(c == '\\') { /* skip over quoted characters */
@@ -557,7 +556,7 @@
 			makearg(argp);
 			count++;
 		}
-		gchain = (struct argnod *)((int)gchain | ARGMK);
+		gchain = (struct argnod *)((intptr_t)gchain | ARGMK);
 	}
 /*NOTREACHED*/
 }
Binary files /home/mario/Downloads/original-bsh/service.o and /home/mario/git/irish/service.o differ
Binary files /home/mario/Downloads/original-bsh/sh and /home/mario/git/irish/sh differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/stak.c /home/mario/git/irish/stak.c
--- /home/mario/Downloads/original-bsh/stak.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/stak.c	2025-12-25 20:41:39.181814018 +0200
@@ -1,22 +1,30 @@
-/*	Copyright (c) 1990, 1991 UNIX System Laboratories, Inc.	*/
-/*	Copyright (c) 1984, 1986, 1987, 1988, 1989, 1990 AT&T	*/
-/*	  All Rights Reserved  	*/
-
-/*	THIS IS UNPUBLISHED PROPRIETARY SOURCE CODE OF     	*/
-/*	UNIX System Laboratories, Inc.                     	*/
-/*	The copyright notice above does not evidence any   	*/
-/*	actual or intended publication of such source code.	*/
-
-#ident	"@(#)sh:stak.c	1.8.5.1"
 /*
  * UNIX shell
  */
 
 #include	"defs.h"
-
+#include    <stdlib.h>
 
 /* ========	storage allocation	======== */
 
+#define STAK_SIZE (8 * 1024 * 1024) /* 8MB Fixed Stack */
+
+static unsigned char *stak_buffer = NULL;
+
+/* Initialize the stack buffer if not already done */
+static void
+init_stak(void)
+{
+	if (!stak_buffer) {
+		stak_buffer = (unsigned char *)malloc(STAK_SIZE);
+		if (!stak_buffer) {
+			error(0, nospace, nospaceid);
+		}
+		stakbas = stakbot = staktop = stak_buffer;
+		brkend = stak_buffer + STAK_SIZE;
+	}
+}
+
 #ifdef __STDC__
 void *
 #else
@@ -28,7 +36,14 @@
 	register unsigned char	*oldstak;
 	register int	size;
 
+	if (!stak_buffer) init_stak();
+
 	size = round(asize, ALIGN);
+	
+	if (stakbot + size >= brkend) {
+		error(0, nospace, nospaceid);
+	}
+
 	oldstak = stakbot;
 	staktop = stakbot += size;
 	return(oldstak);
@@ -41,12 +56,15 @@
 unsigned char *
 locstak()
 {
+	if (!stak_buffer) init_stak();
+	
 	if (brkend - stakbot < BRKINCR)
 	{
-		if (setbrk(brkincr) == (unsigned char *)-1)
+		/* In fixed mode, we can't grow. If we are running out, we are out. */
+		/* But usually locstak just checks enough space for next op. */
+		/* We rely on the 8MB being enough. */
+		if (stakbot >= brkend)
 			error(0, nospace, nospaceid);
-		if (brkincr < BRKMAX)
-			brkincr += 256;
 	}
 	return(stakbot);
 }
@@ -54,6 +72,7 @@
 unsigned char *
 savstak()
 {
+	if (!stak_buffer) init_stak();
 	assert(staktop == stakbot);
 	return(stakbot);
 }
@@ -64,9 +83,16 @@
 {
 	register unsigned char	*oldstak;
 
+	if (!stak_buffer) init_stak();
+
 	*argp++ = 0;
 	oldstak = stakbot;
 	stakbot = staktop = (unsigned char *)round(argp, ALIGN);
+	
+	if (stakbot >= brkend) {
+		error(0, nospace, nospaceid);
+	}
+	
 	return(oldstak);
 }
 
@@ -74,6 +100,8 @@
 tdystak(x)		/* try to bring stack back to x */
 register unsigned char	*x;
 {
+	if (!stak_buffer) init_stak();
+	
 	while ((unsigned char *)stakbsy > x)
 	{
 		free(stakbsy);
@@ -86,8 +114,9 @@
 void
 stakchk()
 {
-	if ((brkend - stakbas) > BRKINCR + BRKINCR)
-		(void)setbrk(-BRKINCR);
+	if (!stak_buffer) init_stak();
+	
+	/* No-op in fixed stack mode as we don't shrink/grow brk */
 }
 
 #ifdef __STDC__
Binary files /home/mario/Downloads/original-bsh/stak.o and /home/mario/git/irish/stak.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/string.c /home/mario/git/irish/string.c
--- /home/mario/Downloads/original-bsh/string.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/string.c	2025-12-25 20:41:39.182814022 +0200
@@ -22,7 +22,7 @@
 movstr(a, b)
 register unsigned char	*a, *b;
 {
-	while (*b++ = *a++);
+	while ((*b++ = *a++));
 	return(--b);
 }
 
@@ -33,7 +33,7 @@
 {
 	register unsigned char d;
 
-	while (d = *s++)
+	while ((d = *s++))
 	{
 		if (d == c)
 			return(TRUE);
Binary files /home/mario/Downloads/original-bsh/string.o and /home/mario/git/irish/string.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/test.c /home/mario/git/irish/test.c
--- /home/mario/Downloads/original-bsh/test.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/test.c	2025-12-25 20:41:39.182814022 +0200
@@ -29,7 +29,7 @@
 static int	e1();
 static int	e2();
 static int	e3();
-static int	exp();
+static int	sh_exp();
 static int	filtyp();
 static int	fsizep();
 static int	ftype();
@@ -51,11 +51,12 @@
 	com[ac] = 0;
 	if (ac <= 1)
 		return(1);
-	return(exp() ? 0 : 1);
+	return(sh_exp() ? 0 : 1);
 }
 
 static unsigned char *
 nxtarg(mt)
+int mt;
 {
 	if (ap >= ac)
 	{
@@ -70,7 +71,7 @@
 }
 
 static int
-exp()
+sh_exp()
 {
 	int	p1;
 	unsigned char	*p2;
@@ -80,7 +81,7 @@
 	if (p2 != 0)
 	{
 		if (eq(p2, "-o"))
-			return(p1 | exp());
+			return(p1 | sh_exp());
 
 		/* if (!eq(p2, ")"))
 			failed("test", synmsg); */
@@ -124,7 +125,7 @@
 	a = nxtarg(0);
 	if (eq(a, "("))
 	{
-		p1 = exp();
+		p1 = sh_exp();
 		if (!eq(nxtarg(0), ")"))
 			error(SYSTST, ") expected", ":478");
 		return(p1);
@@ -207,7 +208,7 @@
 		return(int1 <= int2);
 
 	failed(SYSTST, p2, badop, badopid);
-/* NOTREACHED */
+	return(0);
 }
 
 static int
Binary files /home/mario/Downloads/original-bsh/test.o and /home/mario/git/irish/test.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/ulimit.c /home/mario/git/irish/ulimit.c
--- /home/mario/Downloads/original-bsh/ulimit.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/ulimit.c	2025-12-25 20:41:39.182814022 +0200
@@ -15,11 +15,9 @@
 
 #include <sys/resource.h>
 #include <stdlib.h>
-#include <pfmt.h>
+/* #include <pfmt.h> */
 #include "defs.h"
-#ifdef sgi
-#include <msgs/uxsgicore.h>
-#endif
+/* #include <msgs/uxsgicore.h> */ 
 
 extern	int	getrlimit64();
 extern	int	setrlimit64();
@@ -36,14 +34,18 @@
 	int	divisor;
 	ulong	mask;
 } rlimtab[] = {
-/* RLIMIT_CPU	*/	"time",		":546",	"seconds",	":547",	1,	0x80000000,
-/* RLIMIT_FSIZE */	"file",		":548",	"blocks",	":549",	512,	0x80000000,
-/* RLIMIT_DATA	*/	"data",		":550",	"kbytes",	":551",	1024,	0xffc00000,
-/* RLIMIT_STACK */	"stack",	":552",	"kbytes",	":551",	1024,	0xffc00000,
-/* RLIMIT_CORE	*/	"coredump",	":553",	"blocks",	":549",	512,	0x80000000,
-/* RLIMIT_NOFILE */	"nofiles",	":554",	"descriptors",	":555",	1,	0x80000000,
-/* RLIMIT_VMEM */	"memory",	":556",	"kbytes",	":551",	1024,	0xffc00000,
-/* RLIMIT_RSS */	"rss", _SGI_MMX_sh_rss, "kbytes",	":551",	1024,	0xffc00000
+	{ "time",	":546",	"seconds",	":547",	1,	0x80000000 },
+	{ "file",	":548",	"blocks",	":549",	512,	0x80000000 },
+	{ "data",	":550",	"kbytes",	":551",	1024,	0xffc00000 },
+	{ "stack",	":552",	"kbytes",	":551",	1024,	0xffc00000 },
+	{ "coredump",	":553",	"blocks",	":549",	512,	0x80000000 },
+	{ "nofiles",	":554",	"descriptors",	":555",	1,	0x80000000 },
+#ifdef RLIMIT_AS
+	{ "memory",	":556",	"kbytes",	":551",	1024,	0xffc00000 },
+#endif
+#ifdef RLIMIT_RSS
+	{ "rss",	":550", "kbytes",	":551",	1024,	0xffc00000 }
+#endif
 };
 
 
@@ -107,10 +109,18 @@
 				res = RLIMIT_CPU;
 				break;
 			case 'v':	
-				res = RLIMIT_VMEM;
+#ifdef RLIMIT_AS
+				res = RLIMIT_AS;
+#else
+				res = RLIMIT_DATA;
+#endif
 				break;
 			case 'r':	
+#ifdef RLIMIT_RSS
 				res = RLIMIT_RSS;
+#else
+				res = RLIMIT_DATA;
+#endif
 				break;
 			case '?':
 				prusage(SYSULIMIT, ulimuse, ulimuseid);
Binary files /home/mario/Downloads/original-bsh/ulimit.o and /home/mario/git/irish/ulimit.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/valgrind_irish.log /home/mario/git/irish/valgrind_irish.log
--- /home/mario/Downloads/original-bsh/valgrind_irish.log	1970-01-01 02:00:00.000000000 +0200
+++ /home/mario/git/irish/valgrind_irish.log	2025-12-27 14:12:20.910490661 +0200
@@ -0,0 +1,1678 @@
+==9522== Memcheck, a memory error detector
+==9522== Copyright (C) 2002-2022, and GNU GPL'd, by Julian Seward et al.
+==9522== Using Valgrind-3.22.0 and LibVEX; rerun with -h for copyright info
+==9522== Command: ./sh ./stress.sh
+==9522== Parent PID: 9516
+==9522== 
+==9533== 
+==9533== HEAP SUMMARY:
+==9533==     in use at exit: 8,394,530 bytes in 184 blocks
+==9533==   total heap usage: 206 allocs, 22 frees, 8,399,147 bytes allocated
+==9533== 
+==9533== LEAK SUMMARY:
+==9533==    definitely lost: 0 bytes in 0 blocks
+==9533==    indirectly lost: 0 bytes in 0 blocks
+==9533==      possibly lost: 0 bytes in 0 blocks
+==9533==    still reachable: 8,394,530 bytes in 184 blocks
+==9533==         suppressed: 0 bytes in 0 blocks
+==9533== Reachable blocks (those to which a pointer was found) are not shown.
+==9533== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9533== 
+==9533== For lists of detected and suppressed errors, rerun with: -s
+==9533== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9535== 
+==9535== HEAP SUMMARY:
+==9535==     in use at exit: 8,394,621 bytes in 189 blocks
+==9535==   total heap usage: 212 allocs, 23 frees, 8,399,240 bytes allocated
+==9535== 
+==9535== LEAK SUMMARY:
+==9535==    definitely lost: 0 bytes in 0 blocks
+==9535==    indirectly lost: 0 bytes in 0 blocks
+==9535==      possibly lost: 0 bytes in 0 blocks
+==9535==    still reachable: 8,394,621 bytes in 189 blocks
+==9535==         suppressed: 0 bytes in 0 blocks
+==9535== Reachable blocks (those to which a pointer was found) are not shown.
+==9535== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9535== 
+==9535== For lists of detected and suppressed errors, rerun with: -s
+==9535== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9537== 
+==9537== HEAP SUMMARY:
+==9537==     in use at exit: 8,394,621 bytes in 189 blocks
+==9537==   total heap usage: 214 allocs, 25 frees, 8,399,244 bytes allocated
+==9537== 
+==9537== LEAK SUMMARY:
+==9537==    definitely lost: 0 bytes in 0 blocks
+==9537==    indirectly lost: 0 bytes in 0 blocks
+==9537==      possibly lost: 0 bytes in 0 blocks
+==9537==    still reachable: 8,394,621 bytes in 189 blocks
+==9537==         suppressed: 0 bytes in 0 blocks
+==9537== Reachable blocks (those to which a pointer was found) are not shown.
+==9537== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9537== 
+==9537== For lists of detected and suppressed errors, rerun with: -s
+==9537== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9539== 
+==9539== HEAP SUMMARY:
+==9539==     in use at exit: 8,394,621 bytes in 189 blocks
+==9539==   total heap usage: 216 allocs, 27 frees, 8,399,248 bytes allocated
+==9539== 
+==9539== LEAK SUMMARY:
+==9539==    definitely lost: 0 bytes in 0 blocks
+==9539==    indirectly lost: 0 bytes in 0 blocks
+==9539==      possibly lost: 0 bytes in 0 blocks
+==9539==    still reachable: 8,394,621 bytes in 189 blocks
+==9539==         suppressed: 0 bytes in 0 blocks
+==9539== Reachable blocks (those to which a pointer was found) are not shown.
+==9539== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9539== 
+==9539== For lists of detected and suppressed errors, rerun with: -s
+==9539== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9541== 
+==9541== HEAP SUMMARY:
+==9541==     in use at exit: 8,394,621 bytes in 189 blocks
+==9541==   total heap usage: 218 allocs, 29 frees, 8,399,252 bytes allocated
+==9541== 
+==9541== LEAK SUMMARY:
+==9541==    definitely lost: 0 bytes in 0 blocks
+==9541==    indirectly lost: 0 bytes in 0 blocks
+==9541==      possibly lost: 0 bytes in 0 blocks
+==9541==    still reachable: 8,394,621 bytes in 189 blocks
+==9541==         suppressed: 0 bytes in 0 blocks
+==9541== Reachable blocks (those to which a pointer was found) are not shown.
+==9541== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9541== 
+==9541== For lists of detected and suppressed errors, rerun with: -s
+==9541== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9543== 
+==9543== HEAP SUMMARY:
+==9543==     in use at exit: 8,394,621 bytes in 189 blocks
+==9543==   total heap usage: 220 allocs, 31 frees, 8,399,256 bytes allocated
+==9543== 
+==9543== LEAK SUMMARY:
+==9543==    definitely lost: 0 bytes in 0 blocks
+==9543==    indirectly lost: 0 bytes in 0 blocks
+==9543==      possibly lost: 0 bytes in 0 blocks
+==9543==    still reachable: 8,394,621 bytes in 189 blocks
+==9543==         suppressed: 0 bytes in 0 blocks
+==9543== Reachable blocks (those to which a pointer was found) are not shown.
+==9543== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9543== 
+==9543== For lists of detected and suppressed errors, rerun with: -s
+==9543== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9545== 
+==9545== HEAP SUMMARY:
+==9545==     in use at exit: 8,394,621 bytes in 189 blocks
+==9545==   total heap usage: 222 allocs, 33 frees, 8,399,260 bytes allocated
+==9545== 
+==9545== LEAK SUMMARY:
+==9545==    definitely lost: 0 bytes in 0 blocks
+==9545==    indirectly lost: 0 bytes in 0 blocks
+==9545==      possibly lost: 0 bytes in 0 blocks
+==9545==    still reachable: 8,394,621 bytes in 189 blocks
+==9545==         suppressed: 0 bytes in 0 blocks
+==9545== Reachable blocks (those to which a pointer was found) are not shown.
+==9545== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9545== 
+==9545== For lists of detected and suppressed errors, rerun with: -s
+==9545== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9547== 
+==9547== HEAP SUMMARY:
+==9547==     in use at exit: 8,394,621 bytes in 189 blocks
+==9547==   total heap usage: 224 allocs, 35 frees, 8,399,264 bytes allocated
+==9547== 
+==9547== LEAK SUMMARY:
+==9547==    definitely lost: 0 bytes in 0 blocks
+==9547==    indirectly lost: 0 bytes in 0 blocks
+==9547==      possibly lost: 0 bytes in 0 blocks
+==9547==    still reachable: 8,394,621 bytes in 189 blocks
+==9547==         suppressed: 0 bytes in 0 blocks
+==9547== Reachable blocks (those to which a pointer was found) are not shown.
+==9547== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9547== 
+==9547== For lists of detected and suppressed errors, rerun with: -s
+==9547== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9549== 
+==9549== HEAP SUMMARY:
+==9549==     in use at exit: 8,394,621 bytes in 189 blocks
+==9549==   total heap usage: 226 allocs, 37 frees, 8,399,268 bytes allocated
+==9549== 
+==9549== LEAK SUMMARY:
+==9549==    definitely lost: 0 bytes in 0 blocks
+==9549==    indirectly lost: 0 bytes in 0 blocks
+==9549==      possibly lost: 0 bytes in 0 blocks
+==9549==    still reachable: 8,394,621 bytes in 189 blocks
+==9549==         suppressed: 0 bytes in 0 blocks
+==9549== Reachable blocks (those to which a pointer was found) are not shown.
+==9549== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9549== 
+==9549== For lists of detected and suppressed errors, rerun with: -s
+==9549== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9551== 
+==9551== HEAP SUMMARY:
+==9551==     in use at exit: 8,394,621 bytes in 189 blocks
+==9551==   total heap usage: 228 allocs, 39 frees, 8,399,272 bytes allocated
+==9551== 
+==9551== LEAK SUMMARY:
+==9551==    definitely lost: 0 bytes in 0 blocks
+==9551==    indirectly lost: 0 bytes in 0 blocks
+==9551==      possibly lost: 0 bytes in 0 blocks
+==9551==    still reachable: 8,394,621 bytes in 189 blocks
+==9551==         suppressed: 0 bytes in 0 blocks
+==9551== Reachable blocks (those to which a pointer was found) are not shown.
+==9551== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9551== 
+==9551== For lists of detected and suppressed errors, rerun with: -s
+==9551== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9553== 
+==9553== HEAP SUMMARY:
+==9553==     in use at exit: 8,394,622 bytes in 189 blocks
+==9553==   total heap usage: 230 allocs, 41 frees, 8,399,277 bytes allocated
+==9553== 
+==9553== LEAK SUMMARY:
+==9553==    definitely lost: 0 bytes in 0 blocks
+==9553==    indirectly lost: 0 bytes in 0 blocks
+==9553==      possibly lost: 0 bytes in 0 blocks
+==9553==    still reachable: 8,394,622 bytes in 189 blocks
+==9553==         suppressed: 0 bytes in 0 blocks
+==9553== Reachable blocks (those to which a pointer was found) are not shown.
+==9553== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9553== 
+==9553== For lists of detected and suppressed errors, rerun with: -s
+==9553== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9555== 
+==9555== HEAP SUMMARY:
+==9555==     in use at exit: 8,394,623 bytes in 189 blocks
+==9555==   total heap usage: 232 allocs, 43 frees, 8,399,283 bytes allocated
+==9555== 
+==9555== LEAK SUMMARY:
+==9555==    definitely lost: 0 bytes in 0 blocks
+==9555==    indirectly lost: 0 bytes in 0 blocks
+==9555==      possibly lost: 0 bytes in 0 blocks
+==9555==    still reachable: 8,394,623 bytes in 189 blocks
+==9555==         suppressed: 0 bytes in 0 blocks
+==9555== Reachable blocks (those to which a pointer was found) are not shown.
+==9555== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9555== 
+==9555== For lists of detected and suppressed errors, rerun with: -s
+==9555== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9557== 
+==9557== HEAP SUMMARY:
+==9557==     in use at exit: 8,394,623 bytes in 189 blocks
+==9557==   total heap usage: 234 allocs, 45 frees, 8,399,289 bytes allocated
+==9557== 
+==9557== LEAK SUMMARY:
+==9557==    definitely lost: 0 bytes in 0 blocks
+==9557==    indirectly lost: 0 bytes in 0 blocks
+==9557==      possibly lost: 0 bytes in 0 blocks
+==9557==    still reachable: 8,394,623 bytes in 189 blocks
+==9557==         suppressed: 0 bytes in 0 blocks
+==9557== Reachable blocks (those to which a pointer was found) are not shown.
+==9557== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9557== 
+==9557== For lists of detected and suppressed errors, rerun with: -s
+==9557== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9559== 
+==9559== HEAP SUMMARY:
+==9559==     in use at exit: 8,394,623 bytes in 189 blocks
+==9559==   total heap usage: 236 allocs, 47 frees, 8,399,295 bytes allocated
+==9559== 
+==9559== LEAK SUMMARY:
+==9559==    definitely lost: 0 bytes in 0 blocks
+==9559==    indirectly lost: 0 bytes in 0 blocks
+==9559==      possibly lost: 0 bytes in 0 blocks
+==9559==    still reachable: 8,394,623 bytes in 189 blocks
+==9559==         suppressed: 0 bytes in 0 blocks
+==9559== Reachable blocks (those to which a pointer was found) are not shown.
+==9559== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9559== 
+==9559== For lists of detected and suppressed errors, rerun with: -s
+==9559== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9561== 
+==9561== HEAP SUMMARY:
+==9561==     in use at exit: 8,394,623 bytes in 189 blocks
+==9561==   total heap usage: 238 allocs, 49 frees, 8,399,301 bytes allocated
+==9561== 
+==9561== LEAK SUMMARY:
+==9561==    definitely lost: 0 bytes in 0 blocks
+==9561==    indirectly lost: 0 bytes in 0 blocks
+==9561==      possibly lost: 0 bytes in 0 blocks
+==9561==    still reachable: 8,394,623 bytes in 189 blocks
+==9561==         suppressed: 0 bytes in 0 blocks
+==9561== Reachable blocks (those to which a pointer was found) are not shown.
+==9561== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9561== 
+==9561== For lists of detected and suppressed errors, rerun with: -s
+==9561== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9563== 
+==9563== HEAP SUMMARY:
+==9563==     in use at exit: 8,394,623 bytes in 189 blocks
+==9563==   total heap usage: 240 allocs, 51 frees, 8,399,307 bytes allocated
+==9563== 
+==9563== LEAK SUMMARY:
+==9563==    definitely lost: 0 bytes in 0 blocks
+==9563==    indirectly lost: 0 bytes in 0 blocks
+==9563==      possibly lost: 0 bytes in 0 blocks
+==9563==    still reachable: 8,394,623 bytes in 189 blocks
+==9563==         suppressed: 0 bytes in 0 blocks
+==9563== Reachable blocks (those to which a pointer was found) are not shown.
+==9563== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9563== 
+==9563== For lists of detected and suppressed errors, rerun with: -s
+==9563== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9565== 
+==9565== HEAP SUMMARY:
+==9565==     in use at exit: 8,394,623 bytes in 189 blocks
+==9565==   total heap usage: 242 allocs, 53 frees, 8,399,313 bytes allocated
+==9565== 
+==9565== LEAK SUMMARY:
+==9565==    definitely lost: 0 bytes in 0 blocks
+==9565==    indirectly lost: 0 bytes in 0 blocks
+==9565==      possibly lost: 0 bytes in 0 blocks
+==9565==    still reachable: 8,394,623 bytes in 189 blocks
+==9565==         suppressed: 0 bytes in 0 blocks
+==9565== Reachable blocks (those to which a pointer was found) are not shown.
+==9565== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9565== 
+==9565== For lists of detected and suppressed errors, rerun with: -s
+==9565== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9567== 
+==9567== HEAP SUMMARY:
+==9567==     in use at exit: 8,394,623 bytes in 189 blocks
+==9567==   total heap usage: 244 allocs, 55 frees, 8,399,319 bytes allocated
+==9567== 
+==9567== LEAK SUMMARY:
+==9567==    definitely lost: 0 bytes in 0 blocks
+==9567==    indirectly lost: 0 bytes in 0 blocks
+==9567==      possibly lost: 0 bytes in 0 blocks
+==9567==    still reachable: 8,394,623 bytes in 189 blocks
+==9567==         suppressed: 0 bytes in 0 blocks
+==9567== Reachable blocks (those to which a pointer was found) are not shown.
+==9567== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9567== 
+==9567== For lists of detected and suppressed errors, rerun with: -s
+==9567== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9569== 
+==9569== HEAP SUMMARY:
+==9569==     in use at exit: 8,394,623 bytes in 189 blocks
+==9569==   total heap usage: 246 allocs, 57 frees, 8,399,325 bytes allocated
+==9569== 
+==9569== LEAK SUMMARY:
+==9569==    definitely lost: 0 bytes in 0 blocks
+==9569==    indirectly lost: 0 bytes in 0 blocks
+==9569==      possibly lost: 0 bytes in 0 blocks
+==9569==    still reachable: 8,394,623 bytes in 189 blocks
+==9569==         suppressed: 0 bytes in 0 blocks
+==9569== Reachable blocks (those to which a pointer was found) are not shown.
+==9569== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9569== 
+==9569== For lists of detected and suppressed errors, rerun with: -s
+==9569== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9571== 
+==9571== HEAP SUMMARY:
+==9571==     in use at exit: 8,394,623 bytes in 189 blocks
+==9571==   total heap usage: 248 allocs, 59 frees, 8,399,331 bytes allocated
+==9571== 
+==9571== LEAK SUMMARY:
+==9571==    definitely lost: 0 bytes in 0 blocks
+==9571==    indirectly lost: 0 bytes in 0 blocks
+==9571==      possibly lost: 0 bytes in 0 blocks
+==9571==    still reachable: 8,394,623 bytes in 189 blocks
+==9571==         suppressed: 0 bytes in 0 blocks
+==9571== Reachable blocks (those to which a pointer was found) are not shown.
+==9571== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9571== 
+==9571== For lists of detected and suppressed errors, rerun with: -s
+==9571== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9573== 
+==9573== HEAP SUMMARY:
+==9573==     in use at exit: 8,394,623 bytes in 189 blocks
+==9573==   total heap usage: 250 allocs, 61 frees, 8,399,337 bytes allocated
+==9573== 
+==9573== LEAK SUMMARY:
+==9573==    definitely lost: 0 bytes in 0 blocks
+==9573==    indirectly lost: 0 bytes in 0 blocks
+==9573==      possibly lost: 0 bytes in 0 blocks
+==9573==    still reachable: 8,394,623 bytes in 189 blocks
+==9573==         suppressed: 0 bytes in 0 blocks
+==9573== Reachable blocks (those to which a pointer was found) are not shown.
+==9573== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9573== 
+==9573== For lists of detected and suppressed errors, rerun with: -s
+==9573== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9575== 
+==9575== HEAP SUMMARY:
+==9575==     in use at exit: 8,394,623 bytes in 189 blocks
+==9575==   total heap usage: 252 allocs, 63 frees, 8,399,343 bytes allocated
+==9575== 
+==9575== LEAK SUMMARY:
+==9575==    definitely lost: 0 bytes in 0 blocks
+==9575==    indirectly lost: 0 bytes in 0 blocks
+==9575==      possibly lost: 0 bytes in 0 blocks
+==9575==    still reachable: 8,394,623 bytes in 189 blocks
+==9575==         suppressed: 0 bytes in 0 blocks
+==9575== Reachable blocks (those to which a pointer was found) are not shown.
+==9575== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9575== 
+==9575== For lists of detected and suppressed errors, rerun with: -s
+==9575== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9577== 
+==9577== HEAP SUMMARY:
+==9577==     in use at exit: 8,394,623 bytes in 189 blocks
+==9577==   total heap usage: 254 allocs, 65 frees, 8,399,349 bytes allocated
+==9577== 
+==9577== LEAK SUMMARY:
+==9577==    definitely lost: 0 bytes in 0 blocks
+==9577==    indirectly lost: 0 bytes in 0 blocks
+==9577==      possibly lost: 0 bytes in 0 blocks
+==9577==    still reachable: 8,394,623 bytes in 189 blocks
+==9577==         suppressed: 0 bytes in 0 blocks
+==9577== Reachable blocks (those to which a pointer was found) are not shown.
+==9577== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9577== 
+==9577== For lists of detected and suppressed errors, rerun with: -s
+==9577== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9579== 
+==9579== HEAP SUMMARY:
+==9579==     in use at exit: 8,394,623 bytes in 189 blocks
+==9579==   total heap usage: 256 allocs, 67 frees, 8,399,355 bytes allocated
+==9579== 
+==9579== LEAK SUMMARY:
+==9579==    definitely lost: 0 bytes in 0 blocks
+==9579==    indirectly lost: 0 bytes in 0 blocks
+==9579==      possibly lost: 0 bytes in 0 blocks
+==9579==    still reachable: 8,394,623 bytes in 189 blocks
+==9579==         suppressed: 0 bytes in 0 blocks
+==9579== Reachable blocks (those to which a pointer was found) are not shown.
+==9579== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9579== 
+==9579== For lists of detected and suppressed errors, rerun with: -s
+==9579== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9581== 
+==9581== HEAP SUMMARY:
+==9581==     in use at exit: 8,394,623 bytes in 189 blocks
+==9581==   total heap usage: 258 allocs, 69 frees, 8,399,361 bytes allocated
+==9581== 
+==9581== LEAK SUMMARY:
+==9581==    definitely lost: 0 bytes in 0 blocks
+==9581==    indirectly lost: 0 bytes in 0 blocks
+==9581==      possibly lost: 0 bytes in 0 blocks
+==9581==    still reachable: 8,394,623 bytes in 189 blocks
+==9581==         suppressed: 0 bytes in 0 blocks
+==9581== Reachable blocks (those to which a pointer was found) are not shown.
+==9581== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9581== 
+==9581== For lists of detected and suppressed errors, rerun with: -s
+==9581== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9583== 
+==9583== HEAP SUMMARY:
+==9583==     in use at exit: 8,394,623 bytes in 189 blocks
+==9583==   total heap usage: 260 allocs, 71 frees, 8,399,367 bytes allocated
+==9583== 
+==9583== LEAK SUMMARY:
+==9583==    definitely lost: 0 bytes in 0 blocks
+==9583==    indirectly lost: 0 bytes in 0 blocks
+==9583==      possibly lost: 0 bytes in 0 blocks
+==9583==    still reachable: 8,394,623 bytes in 189 blocks
+==9583==         suppressed: 0 bytes in 0 blocks
+==9583== Reachable blocks (those to which a pointer was found) are not shown.
+==9583== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9583== 
+==9583== For lists of detected and suppressed errors, rerun with: -s
+==9583== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9585== 
+==9585== HEAP SUMMARY:
+==9585==     in use at exit: 8,394,623 bytes in 189 blocks
+==9585==   total heap usage: 262 allocs, 73 frees, 8,399,373 bytes allocated
+==9585== 
+==9585== LEAK SUMMARY:
+==9585==    definitely lost: 0 bytes in 0 blocks
+==9585==    indirectly lost: 0 bytes in 0 blocks
+==9585==      possibly lost: 0 bytes in 0 blocks
+==9585==    still reachable: 8,394,623 bytes in 189 blocks
+==9585==         suppressed: 0 bytes in 0 blocks
+==9585== Reachable blocks (those to which a pointer was found) are not shown.
+==9585== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9585== 
+==9585== For lists of detected and suppressed errors, rerun with: -s
+==9585== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9587== 
+==9587== HEAP SUMMARY:
+==9587==     in use at exit: 8,394,623 bytes in 189 blocks
+==9587==   total heap usage: 264 allocs, 75 frees, 8,399,379 bytes allocated
+==9587== 
+==9587== LEAK SUMMARY:
+==9587==    definitely lost: 0 bytes in 0 blocks
+==9587==    indirectly lost: 0 bytes in 0 blocks
+==9587==      possibly lost: 0 bytes in 0 blocks
+==9587==    still reachable: 8,394,623 bytes in 189 blocks
+==9587==         suppressed: 0 bytes in 0 blocks
+==9587== Reachable blocks (those to which a pointer was found) are not shown.
+==9587== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9587== 
+==9587== For lists of detected and suppressed errors, rerun with: -s
+==9587== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9589== 
+==9589== HEAP SUMMARY:
+==9589==     in use at exit: 8,394,623 bytes in 189 blocks
+==9589==   total heap usage: 266 allocs, 77 frees, 8,399,385 bytes allocated
+==9589== 
+==9589== LEAK SUMMARY:
+==9589==    definitely lost: 0 bytes in 0 blocks
+==9589==    indirectly lost: 0 bytes in 0 blocks
+==9589==      possibly lost: 0 bytes in 0 blocks
+==9589==    still reachable: 8,394,623 bytes in 189 blocks
+==9589==         suppressed: 0 bytes in 0 blocks
+==9589== Reachable blocks (those to which a pointer was found) are not shown.
+==9589== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9589== 
+==9589== For lists of detected and suppressed errors, rerun with: -s
+==9589== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9591== 
+==9591== HEAP SUMMARY:
+==9591==     in use at exit: 8,394,623 bytes in 189 blocks
+==9591==   total heap usage: 268 allocs, 79 frees, 8,399,391 bytes allocated
+==9591== 
+==9591== LEAK SUMMARY:
+==9591==    definitely lost: 0 bytes in 0 blocks
+==9591==    indirectly lost: 0 bytes in 0 blocks
+==9591==      possibly lost: 0 bytes in 0 blocks
+==9591==    still reachable: 8,394,623 bytes in 189 blocks
+==9591==         suppressed: 0 bytes in 0 blocks
+==9591== Reachable blocks (those to which a pointer was found) are not shown.
+==9591== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9591== 
+==9591== For lists of detected and suppressed errors, rerun with: -s
+==9591== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9593== 
+==9593== HEAP SUMMARY:
+==9593==     in use at exit: 8,394,623 bytes in 189 blocks
+==9593==   total heap usage: 270 allocs, 81 frees, 8,399,397 bytes allocated
+==9593== 
+==9593== LEAK SUMMARY:
+==9593==    definitely lost: 0 bytes in 0 blocks
+==9593==    indirectly lost: 0 bytes in 0 blocks
+==9593==      possibly lost: 0 bytes in 0 blocks
+==9593==    still reachable: 8,394,623 bytes in 189 blocks
+==9593==         suppressed: 0 bytes in 0 blocks
+==9593== Reachable blocks (those to which a pointer was found) are not shown.
+==9593== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9593== 
+==9593== For lists of detected and suppressed errors, rerun with: -s
+==9593== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9595== 
+==9595== HEAP SUMMARY:
+==9595==     in use at exit: 8,394,623 bytes in 189 blocks
+==9595==   total heap usage: 272 allocs, 83 frees, 8,399,403 bytes allocated
+==9595== 
+==9595== LEAK SUMMARY:
+==9595==    definitely lost: 0 bytes in 0 blocks
+==9595==    indirectly lost: 0 bytes in 0 blocks
+==9595==      possibly lost: 0 bytes in 0 blocks
+==9595==    still reachable: 8,394,623 bytes in 189 blocks
+==9595==         suppressed: 0 bytes in 0 blocks
+==9595== Reachable blocks (those to which a pointer was found) are not shown.
+==9595== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9595== 
+==9595== For lists of detected and suppressed errors, rerun with: -s
+==9595== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9597== 
+==9597== HEAP SUMMARY:
+==9597==     in use at exit: 8,394,623 bytes in 189 blocks
+==9597==   total heap usage: 274 allocs, 85 frees, 8,399,409 bytes allocated
+==9597== 
+==9597== LEAK SUMMARY:
+==9597==    definitely lost: 0 bytes in 0 blocks
+==9597==    indirectly lost: 0 bytes in 0 blocks
+==9597==      possibly lost: 0 bytes in 0 blocks
+==9597==    still reachable: 8,394,623 bytes in 189 blocks
+==9597==         suppressed: 0 bytes in 0 blocks
+==9597== Reachable blocks (those to which a pointer was found) are not shown.
+==9597== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9597== 
+==9597== For lists of detected and suppressed errors, rerun with: -s
+==9597== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9599== 
+==9599== HEAP SUMMARY:
+==9599==     in use at exit: 8,394,623 bytes in 189 blocks
+==9599==   total heap usage: 276 allocs, 87 frees, 8,399,415 bytes allocated
+==9599== 
+==9599== LEAK SUMMARY:
+==9599==    definitely lost: 0 bytes in 0 blocks
+==9599==    indirectly lost: 0 bytes in 0 blocks
+==9599==      possibly lost: 0 bytes in 0 blocks
+==9599==    still reachable: 8,394,623 bytes in 189 blocks
+==9599==         suppressed: 0 bytes in 0 blocks
+==9599== Reachable blocks (those to which a pointer was found) are not shown.
+==9599== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9599== 
+==9599== For lists of detected and suppressed errors, rerun with: -s
+==9599== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9601== 
+==9601== HEAP SUMMARY:
+==9601==     in use at exit: 8,394,623 bytes in 189 blocks
+==9601==   total heap usage: 278 allocs, 89 frees, 8,399,421 bytes allocated
+==9601== 
+==9601== LEAK SUMMARY:
+==9601==    definitely lost: 0 bytes in 0 blocks
+==9601==    indirectly lost: 0 bytes in 0 blocks
+==9601==      possibly lost: 0 bytes in 0 blocks
+==9601==    still reachable: 8,394,623 bytes in 189 blocks
+==9601==         suppressed: 0 bytes in 0 blocks
+==9601== Reachable blocks (those to which a pointer was found) are not shown.
+==9601== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9601== 
+==9601== For lists of detected and suppressed errors, rerun with: -s
+==9601== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9603== 
+==9603== HEAP SUMMARY:
+==9603==     in use at exit: 8,394,623 bytes in 189 blocks
+==9603==   total heap usage: 280 allocs, 91 frees, 8,399,427 bytes allocated
+==9603== 
+==9603== LEAK SUMMARY:
+==9603==    definitely lost: 0 bytes in 0 blocks
+==9603==    indirectly lost: 0 bytes in 0 blocks
+==9603==      possibly lost: 0 bytes in 0 blocks
+==9603==    still reachable: 8,394,623 bytes in 189 blocks
+==9603==         suppressed: 0 bytes in 0 blocks
+==9603== Reachable blocks (those to which a pointer was found) are not shown.
+==9603== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9603== 
+==9603== For lists of detected and suppressed errors, rerun with: -s
+==9603== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9605== 
+==9605== HEAP SUMMARY:
+==9605==     in use at exit: 8,394,623 bytes in 189 blocks
+==9605==   total heap usage: 282 allocs, 93 frees, 8,399,433 bytes allocated
+==9605== 
+==9605== LEAK SUMMARY:
+==9605==    definitely lost: 0 bytes in 0 blocks
+==9605==    indirectly lost: 0 bytes in 0 blocks
+==9605==      possibly lost: 0 bytes in 0 blocks
+==9605==    still reachable: 8,394,623 bytes in 189 blocks
+==9605==         suppressed: 0 bytes in 0 blocks
+==9605== Reachable blocks (those to which a pointer was found) are not shown.
+==9605== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9605== 
+==9605== For lists of detected and suppressed errors, rerun with: -s
+==9605== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9608== 
+==9608== HEAP SUMMARY:
+==9608==     in use at exit: 8,394,623 bytes in 189 blocks
+==9608==   total heap usage: 284 allocs, 95 frees, 8,399,439 bytes allocated
+==9608== 
+==9608== LEAK SUMMARY:
+==9608==    definitely lost: 0 bytes in 0 blocks
+==9608==    indirectly lost: 0 bytes in 0 blocks
+==9608==      possibly lost: 0 bytes in 0 blocks
+==9608==    still reachable: 8,394,623 bytes in 189 blocks
+==9608==         suppressed: 0 bytes in 0 blocks
+==9608== Reachable blocks (those to which a pointer was found) are not shown.
+==9608== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9608== 
+==9608== For lists of detected and suppressed errors, rerun with: -s
+==9608== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9610== 
+==9610== HEAP SUMMARY:
+==9610==     in use at exit: 8,394,623 bytes in 189 blocks
+==9610==   total heap usage: 286 allocs, 97 frees, 8,399,445 bytes allocated
+==9610== 
+==9610== LEAK SUMMARY:
+==9610==    definitely lost: 0 bytes in 0 blocks
+==9610==    indirectly lost: 0 bytes in 0 blocks
+==9610==      possibly lost: 0 bytes in 0 blocks
+==9610==    still reachable: 8,394,623 bytes in 189 blocks
+==9610==         suppressed: 0 bytes in 0 blocks
+==9610== Reachable blocks (those to which a pointer was found) are not shown.
+==9610== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9610== 
+==9610== For lists of detected and suppressed errors, rerun with: -s
+==9610== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9612== 
+==9612== HEAP SUMMARY:
+==9612==     in use at exit: 8,394,623 bytes in 189 blocks
+==9612==   total heap usage: 288 allocs, 99 frees, 8,399,451 bytes allocated
+==9612== 
+==9612== LEAK SUMMARY:
+==9612==    definitely lost: 0 bytes in 0 blocks
+==9612==    indirectly lost: 0 bytes in 0 blocks
+==9612==      possibly lost: 0 bytes in 0 blocks
+==9612==    still reachable: 8,394,623 bytes in 189 blocks
+==9612==         suppressed: 0 bytes in 0 blocks
+==9612== Reachable blocks (those to which a pointer was found) are not shown.
+==9612== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9612== 
+==9612== For lists of detected and suppressed errors, rerun with: -s
+==9612== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9614== 
+==9614== HEAP SUMMARY:
+==9614==     in use at exit: 8,394,623 bytes in 189 blocks
+==9614==   total heap usage: 290 allocs, 101 frees, 8,399,457 bytes allocated
+==9614== 
+==9614== LEAK SUMMARY:
+==9614==    definitely lost: 0 bytes in 0 blocks
+==9614==    indirectly lost: 0 bytes in 0 blocks
+==9614==      possibly lost: 0 bytes in 0 blocks
+==9614==    still reachable: 8,394,623 bytes in 189 blocks
+==9614==         suppressed: 0 bytes in 0 blocks
+==9614== Reachable blocks (those to which a pointer was found) are not shown.
+==9614== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9614== 
+==9614== For lists of detected and suppressed errors, rerun with: -s
+==9614== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9616== 
+==9616== HEAP SUMMARY:
+==9616==     in use at exit: 8,394,623 bytes in 189 blocks
+==9616==   total heap usage: 292 allocs, 103 frees, 8,399,463 bytes allocated
+==9616== 
+==9616== LEAK SUMMARY:
+==9616==    definitely lost: 0 bytes in 0 blocks
+==9616==    indirectly lost: 0 bytes in 0 blocks
+==9616==      possibly lost: 0 bytes in 0 blocks
+==9616==    still reachable: 8,394,623 bytes in 189 blocks
+==9616==         suppressed: 0 bytes in 0 blocks
+==9616== Reachable blocks (those to which a pointer was found) are not shown.
+==9616== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9616== 
+==9616== For lists of detected and suppressed errors, rerun with: -s
+==9616== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9618== 
+==9618== HEAP SUMMARY:
+==9618==     in use at exit: 8,394,623 bytes in 189 blocks
+==9618==   total heap usage: 294 allocs, 105 frees, 8,399,469 bytes allocated
+==9618== 
+==9618== LEAK SUMMARY:
+==9618==    definitely lost: 0 bytes in 0 blocks
+==9618==    indirectly lost: 0 bytes in 0 blocks
+==9618==      possibly lost: 0 bytes in 0 blocks
+==9618==    still reachable: 8,394,623 bytes in 189 blocks
+==9618==         suppressed: 0 bytes in 0 blocks
+==9618== Reachable blocks (those to which a pointer was found) are not shown.
+==9618== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9618== 
+==9618== For lists of detected and suppressed errors, rerun with: -s
+==9618== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9620== 
+==9620== HEAP SUMMARY:
+==9620==     in use at exit: 8,394,623 bytes in 189 blocks
+==9620==   total heap usage: 296 allocs, 107 frees, 8,399,475 bytes allocated
+==9620== 
+==9620== LEAK SUMMARY:
+==9620==    definitely lost: 0 bytes in 0 blocks
+==9620==    indirectly lost: 0 bytes in 0 blocks
+==9620==      possibly lost: 0 bytes in 0 blocks
+==9620==    still reachable: 8,394,623 bytes in 189 blocks
+==9620==         suppressed: 0 bytes in 0 blocks
+==9620== Reachable blocks (those to which a pointer was found) are not shown.
+==9620== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9620== 
+==9620== For lists of detected and suppressed errors, rerun with: -s
+==9620== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9622== 
+==9622== HEAP SUMMARY:
+==9622==     in use at exit: 8,394,623 bytes in 189 blocks
+==9622==   total heap usage: 298 allocs, 109 frees, 8,399,481 bytes allocated
+==9622== 
+==9622== LEAK SUMMARY:
+==9622==    definitely lost: 0 bytes in 0 blocks
+==9622==    indirectly lost: 0 bytes in 0 blocks
+==9622==      possibly lost: 0 bytes in 0 blocks
+==9622==    still reachable: 8,394,623 bytes in 189 blocks
+==9622==         suppressed: 0 bytes in 0 blocks
+==9622== Reachable blocks (those to which a pointer was found) are not shown.
+==9622== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9622== 
+==9622== For lists of detected and suppressed errors, rerun with: -s
+==9622== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9624== 
+==9624== HEAP SUMMARY:
+==9624==     in use at exit: 8,394,623 bytes in 189 blocks
+==9624==   total heap usage: 300 allocs, 111 frees, 8,399,487 bytes allocated
+==9624== 
+==9624== LEAK SUMMARY:
+==9624==    definitely lost: 0 bytes in 0 blocks
+==9624==    indirectly lost: 0 bytes in 0 blocks
+==9624==      possibly lost: 0 bytes in 0 blocks
+==9624==    still reachable: 8,394,623 bytes in 189 blocks
+==9624==         suppressed: 0 bytes in 0 blocks
+==9624== Reachable blocks (those to which a pointer was found) are not shown.
+==9624== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9624== 
+==9624== For lists of detected and suppressed errors, rerun with: -s
+==9624== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9626== 
+==9626== HEAP SUMMARY:
+==9626==     in use at exit: 8,394,623 bytes in 189 blocks
+==9626==   total heap usage: 302 allocs, 113 frees, 8,399,493 bytes allocated
+==9626== 
+==9626== LEAK SUMMARY:
+==9626==    definitely lost: 0 bytes in 0 blocks
+==9626==    indirectly lost: 0 bytes in 0 blocks
+==9626==      possibly lost: 0 bytes in 0 blocks
+==9626==    still reachable: 8,394,623 bytes in 189 blocks
+==9626==         suppressed: 0 bytes in 0 blocks
+==9626== Reachable blocks (those to which a pointer was found) are not shown.
+==9626== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9626== 
+==9626== For lists of detected and suppressed errors, rerun with: -s
+==9626== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9628== 
+==9628== HEAP SUMMARY:
+==9628==     in use at exit: 8,394,623 bytes in 189 blocks
+==9628==   total heap usage: 304 allocs, 115 frees, 8,399,499 bytes allocated
+==9628== 
+==9628== LEAK SUMMARY:
+==9628==    definitely lost: 0 bytes in 0 blocks
+==9628==    indirectly lost: 0 bytes in 0 blocks
+==9628==      possibly lost: 0 bytes in 0 blocks
+==9628==    still reachable: 8,394,623 bytes in 189 blocks
+==9628==         suppressed: 0 bytes in 0 blocks
+==9628== Reachable blocks (those to which a pointer was found) are not shown.
+==9628== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9628== 
+==9628== For lists of detected and suppressed errors, rerun with: -s
+==9628== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9630== 
+==9630== HEAP SUMMARY:
+==9630==     in use at exit: 8,394,623 bytes in 189 blocks
+==9630==   total heap usage: 306 allocs, 117 frees, 8,399,505 bytes allocated
+==9630== 
+==9630== LEAK SUMMARY:
+==9630==    definitely lost: 0 bytes in 0 blocks
+==9630==    indirectly lost: 0 bytes in 0 blocks
+==9630==      possibly lost: 0 bytes in 0 blocks
+==9630==    still reachable: 8,394,623 bytes in 189 blocks
+==9630==         suppressed: 0 bytes in 0 blocks
+==9630== Reachable blocks (those to which a pointer was found) are not shown.
+==9630== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9630== 
+==9630== For lists of detected and suppressed errors, rerun with: -s
+==9630== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9632== 
+==9632== HEAP SUMMARY:
+==9632==     in use at exit: 8,394,623 bytes in 189 blocks
+==9632==   total heap usage: 308 allocs, 119 frees, 8,399,511 bytes allocated
+==9632== 
+==9632== LEAK SUMMARY:
+==9632==    definitely lost: 0 bytes in 0 blocks
+==9632==    indirectly lost: 0 bytes in 0 blocks
+==9632==      possibly lost: 0 bytes in 0 blocks
+==9632==    still reachable: 8,394,623 bytes in 189 blocks
+==9632==         suppressed: 0 bytes in 0 blocks
+==9632== Reachable blocks (those to which a pointer was found) are not shown.
+==9632== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9632== 
+==9632== For lists of detected and suppressed errors, rerun with: -s
+==9632== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9634== 
+==9634== HEAP SUMMARY:
+==9634==     in use at exit: 8,394,623 bytes in 189 blocks
+==9634==   total heap usage: 310 allocs, 121 frees, 8,399,517 bytes allocated
+==9634== 
+==9634== LEAK SUMMARY:
+==9634==    definitely lost: 0 bytes in 0 blocks
+==9634==    indirectly lost: 0 bytes in 0 blocks
+==9634==      possibly lost: 0 bytes in 0 blocks
+==9634==    still reachable: 8,394,623 bytes in 189 blocks
+==9634==         suppressed: 0 bytes in 0 blocks
+==9634== Reachable blocks (those to which a pointer was found) are not shown.
+==9634== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9634== 
+==9634== For lists of detected and suppressed errors, rerun with: -s
+==9634== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9636== 
+==9636== HEAP SUMMARY:
+==9636==     in use at exit: 8,394,623 bytes in 189 blocks
+==9636==   total heap usage: 312 allocs, 123 frees, 8,399,523 bytes allocated
+==9636== 
+==9636== LEAK SUMMARY:
+==9636==    definitely lost: 0 bytes in 0 blocks
+==9636==    indirectly lost: 0 bytes in 0 blocks
+==9636==      possibly lost: 0 bytes in 0 blocks
+==9636==    still reachable: 8,394,623 bytes in 189 blocks
+==9636==         suppressed: 0 bytes in 0 blocks
+==9636== Reachable blocks (those to which a pointer was found) are not shown.
+==9636== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9636== 
+==9636== For lists of detected and suppressed errors, rerun with: -s
+==9636== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9638== 
+==9638== HEAP SUMMARY:
+==9638==     in use at exit: 8,394,623 bytes in 189 blocks
+==9638==   total heap usage: 314 allocs, 125 frees, 8,399,529 bytes allocated
+==9638== 
+==9638== LEAK SUMMARY:
+==9638==    definitely lost: 0 bytes in 0 blocks
+==9638==    indirectly lost: 0 bytes in 0 blocks
+==9638==      possibly lost: 0 bytes in 0 blocks
+==9638==    still reachable: 8,394,623 bytes in 189 blocks
+==9638==         suppressed: 0 bytes in 0 blocks
+==9638== Reachable blocks (those to which a pointer was found) are not shown.
+==9638== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9638== 
+==9638== For lists of detected and suppressed errors, rerun with: -s
+==9638== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9640== 
+==9640== HEAP SUMMARY:
+==9640==     in use at exit: 8,394,623 bytes in 189 blocks
+==9640==   total heap usage: 316 allocs, 127 frees, 8,399,535 bytes allocated
+==9640== 
+==9640== LEAK SUMMARY:
+==9640==    definitely lost: 0 bytes in 0 blocks
+==9640==    indirectly lost: 0 bytes in 0 blocks
+==9640==      possibly lost: 0 bytes in 0 blocks
+==9640==    still reachable: 8,394,623 bytes in 189 blocks
+==9640==         suppressed: 0 bytes in 0 blocks
+==9640== Reachable blocks (those to which a pointer was found) are not shown.
+==9640== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9640== 
+==9640== For lists of detected and suppressed errors, rerun with: -s
+==9640== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9642== 
+==9642== HEAP SUMMARY:
+==9642==     in use at exit: 8,394,623 bytes in 189 blocks
+==9642==   total heap usage: 318 allocs, 129 frees, 8,399,541 bytes allocated
+==9642== 
+==9642== LEAK SUMMARY:
+==9642==    definitely lost: 0 bytes in 0 blocks
+==9642==    indirectly lost: 0 bytes in 0 blocks
+==9642==      possibly lost: 0 bytes in 0 blocks
+==9642==    still reachable: 8,394,623 bytes in 189 blocks
+==9642==         suppressed: 0 bytes in 0 blocks
+==9642== Reachable blocks (those to which a pointer was found) are not shown.
+==9642== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9642== 
+==9642== For lists of detected and suppressed errors, rerun with: -s
+==9642== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9644== 
+==9644== HEAP SUMMARY:
+==9644==     in use at exit: 8,394,623 bytes in 189 blocks
+==9644==   total heap usage: 320 allocs, 131 frees, 8,399,547 bytes allocated
+==9644== 
+==9644== LEAK SUMMARY:
+==9644==    definitely lost: 0 bytes in 0 blocks
+==9644==    indirectly lost: 0 bytes in 0 blocks
+==9644==      possibly lost: 0 bytes in 0 blocks
+==9644==    still reachable: 8,394,623 bytes in 189 blocks
+==9644==         suppressed: 0 bytes in 0 blocks
+==9644== Reachable blocks (those to which a pointer was found) are not shown.
+==9644== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9644== 
+==9644== For lists of detected and suppressed errors, rerun with: -s
+==9644== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9646== 
+==9646== HEAP SUMMARY:
+==9646==     in use at exit: 8,394,623 bytes in 189 blocks
+==9646==   total heap usage: 322 allocs, 133 frees, 8,399,553 bytes allocated
+==9646== 
+==9646== LEAK SUMMARY:
+==9646==    definitely lost: 0 bytes in 0 blocks
+==9646==    indirectly lost: 0 bytes in 0 blocks
+==9646==      possibly lost: 0 bytes in 0 blocks
+==9646==    still reachable: 8,394,623 bytes in 189 blocks
+==9646==         suppressed: 0 bytes in 0 blocks
+==9646== Reachable blocks (those to which a pointer was found) are not shown.
+==9646== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9646== 
+==9646== For lists of detected and suppressed errors, rerun with: -s
+==9646== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9648== 
+==9648== HEAP SUMMARY:
+==9648==     in use at exit: 8,394,623 bytes in 189 blocks
+==9648==   total heap usage: 324 allocs, 135 frees, 8,399,559 bytes allocated
+==9648== 
+==9648== LEAK SUMMARY:
+==9648==    definitely lost: 0 bytes in 0 blocks
+==9648==    indirectly lost: 0 bytes in 0 blocks
+==9648==      possibly lost: 0 bytes in 0 blocks
+==9648==    still reachable: 8,394,623 bytes in 189 blocks
+==9648==         suppressed: 0 bytes in 0 blocks
+==9648== Reachable blocks (those to which a pointer was found) are not shown.
+==9648== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9648== 
+==9648== For lists of detected and suppressed errors, rerun with: -s
+==9648== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9650== 
+==9650== HEAP SUMMARY:
+==9650==     in use at exit: 8,394,623 bytes in 189 blocks
+==9650==   total heap usage: 326 allocs, 137 frees, 8,399,565 bytes allocated
+==9650== 
+==9650== LEAK SUMMARY:
+==9650==    definitely lost: 0 bytes in 0 blocks
+==9650==    indirectly lost: 0 bytes in 0 blocks
+==9650==      possibly lost: 0 bytes in 0 blocks
+==9650==    still reachable: 8,394,623 bytes in 189 blocks
+==9650==         suppressed: 0 bytes in 0 blocks
+==9650== Reachable blocks (those to which a pointer was found) are not shown.
+==9650== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9650== 
+==9650== For lists of detected and suppressed errors, rerun with: -s
+==9650== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9653== 
+==9653== HEAP SUMMARY:
+==9653==     in use at exit: 8,394,623 bytes in 189 blocks
+==9653==   total heap usage: 328 allocs, 139 frees, 8,399,571 bytes allocated
+==9653== 
+==9653== LEAK SUMMARY:
+==9653==    definitely lost: 0 bytes in 0 blocks
+==9653==    indirectly lost: 0 bytes in 0 blocks
+==9653==      possibly lost: 0 bytes in 0 blocks
+==9653==    still reachable: 8,394,623 bytes in 189 blocks
+==9653==         suppressed: 0 bytes in 0 blocks
+==9653== Reachable blocks (those to which a pointer was found) are not shown.
+==9653== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9653== 
+==9653== For lists of detected and suppressed errors, rerun with: -s
+==9653== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9655== 
+==9655== HEAP SUMMARY:
+==9655==     in use at exit: 8,394,623 bytes in 189 blocks
+==9655==   total heap usage: 330 allocs, 141 frees, 8,399,577 bytes allocated
+==9655== 
+==9655== LEAK SUMMARY:
+==9655==    definitely lost: 0 bytes in 0 blocks
+==9655==    indirectly lost: 0 bytes in 0 blocks
+==9655==      possibly lost: 0 bytes in 0 blocks
+==9655==    still reachable: 8,394,623 bytes in 189 blocks
+==9655==         suppressed: 0 bytes in 0 blocks
+==9655== Reachable blocks (those to which a pointer was found) are not shown.
+==9655== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9655== 
+==9655== For lists of detected and suppressed errors, rerun with: -s
+==9655== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9657== 
+==9657== HEAP SUMMARY:
+==9657==     in use at exit: 8,394,623 bytes in 189 blocks
+==9657==   total heap usage: 332 allocs, 143 frees, 8,399,583 bytes allocated
+==9657== 
+==9657== LEAK SUMMARY:
+==9657==    definitely lost: 0 bytes in 0 blocks
+==9657==    indirectly lost: 0 bytes in 0 blocks
+==9657==      possibly lost: 0 bytes in 0 blocks
+==9657==    still reachable: 8,394,623 bytes in 189 blocks
+==9657==         suppressed: 0 bytes in 0 blocks
+==9657== Reachable blocks (those to which a pointer was found) are not shown.
+==9657== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9657== 
+==9657== For lists of detected and suppressed errors, rerun with: -s
+==9657== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9659== 
+==9659== HEAP SUMMARY:
+==9659==     in use at exit: 8,394,623 bytes in 189 blocks
+==9659==   total heap usage: 334 allocs, 145 frees, 8,399,589 bytes allocated
+==9659== 
+==9659== LEAK SUMMARY:
+==9659==    definitely lost: 0 bytes in 0 blocks
+==9659==    indirectly lost: 0 bytes in 0 blocks
+==9659==      possibly lost: 0 bytes in 0 blocks
+==9659==    still reachable: 8,394,623 bytes in 189 blocks
+==9659==         suppressed: 0 bytes in 0 blocks
+==9659== Reachable blocks (those to which a pointer was found) are not shown.
+==9659== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9659== 
+==9659== For lists of detected and suppressed errors, rerun with: -s
+==9659== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9661== 
+==9661== HEAP SUMMARY:
+==9661==     in use at exit: 8,394,623 bytes in 189 blocks
+==9661==   total heap usage: 336 allocs, 147 frees, 8,399,595 bytes allocated
+==9661== 
+==9661== LEAK SUMMARY:
+==9661==    definitely lost: 0 bytes in 0 blocks
+==9661==    indirectly lost: 0 bytes in 0 blocks
+==9661==      possibly lost: 0 bytes in 0 blocks
+==9661==    still reachable: 8,394,623 bytes in 189 blocks
+==9661==         suppressed: 0 bytes in 0 blocks
+==9661== Reachable blocks (those to which a pointer was found) are not shown.
+==9661== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9661== 
+==9661== For lists of detected and suppressed errors, rerun with: -s
+==9661== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9663== 
+==9663== HEAP SUMMARY:
+==9663==     in use at exit: 8,394,623 bytes in 189 blocks
+==9663==   total heap usage: 338 allocs, 149 frees, 8,399,601 bytes allocated
+==9663== 
+==9663== LEAK SUMMARY:
+==9663==    definitely lost: 0 bytes in 0 blocks
+==9663==    indirectly lost: 0 bytes in 0 blocks
+==9663==      possibly lost: 0 bytes in 0 blocks
+==9663==    still reachable: 8,394,623 bytes in 189 blocks
+==9663==         suppressed: 0 bytes in 0 blocks
+==9663== Reachable blocks (those to which a pointer was found) are not shown.
+==9663== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9663== 
+==9663== For lists of detected and suppressed errors, rerun with: -s
+==9663== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9665== 
+==9665== HEAP SUMMARY:
+==9665==     in use at exit: 8,394,623 bytes in 189 blocks
+==9665==   total heap usage: 340 allocs, 151 frees, 8,399,607 bytes allocated
+==9665== 
+==9665== LEAK SUMMARY:
+==9665==    definitely lost: 0 bytes in 0 blocks
+==9665==    indirectly lost: 0 bytes in 0 blocks
+==9665==      possibly lost: 0 bytes in 0 blocks
+==9665==    still reachable: 8,394,623 bytes in 189 blocks
+==9665==         suppressed: 0 bytes in 0 blocks
+==9665== Reachable blocks (those to which a pointer was found) are not shown.
+==9665== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9665== 
+==9665== For lists of detected and suppressed errors, rerun with: -s
+==9665== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9667== 
+==9667== HEAP SUMMARY:
+==9667==     in use at exit: 8,394,623 bytes in 189 blocks
+==9667==   total heap usage: 342 allocs, 153 frees, 8,399,613 bytes allocated
+==9667== 
+==9667== LEAK SUMMARY:
+==9667==    definitely lost: 0 bytes in 0 blocks
+==9667==    indirectly lost: 0 bytes in 0 blocks
+==9667==      possibly lost: 0 bytes in 0 blocks
+==9667==    still reachable: 8,394,623 bytes in 189 blocks
+==9667==         suppressed: 0 bytes in 0 blocks
+==9667== Reachable blocks (those to which a pointer was found) are not shown.
+==9667== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9667== 
+==9667== For lists of detected and suppressed errors, rerun with: -s
+==9667== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9669== 
+==9669== HEAP SUMMARY:
+==9669==     in use at exit: 8,394,623 bytes in 189 blocks
+==9669==   total heap usage: 344 allocs, 155 frees, 8,399,619 bytes allocated
+==9669== 
+==9669== LEAK SUMMARY:
+==9669==    definitely lost: 0 bytes in 0 blocks
+==9669==    indirectly lost: 0 bytes in 0 blocks
+==9669==      possibly lost: 0 bytes in 0 blocks
+==9669==    still reachable: 8,394,623 bytes in 189 blocks
+==9669==         suppressed: 0 bytes in 0 blocks
+==9669== Reachable blocks (those to which a pointer was found) are not shown.
+==9669== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9669== 
+==9669== For lists of detected and suppressed errors, rerun with: -s
+==9669== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9671== 
+==9671== HEAP SUMMARY:
+==9671==     in use at exit: 8,394,623 bytes in 189 blocks
+==9671==   total heap usage: 346 allocs, 157 frees, 8,399,625 bytes allocated
+==9671== 
+==9671== LEAK SUMMARY:
+==9671==    definitely lost: 0 bytes in 0 blocks
+==9671==    indirectly lost: 0 bytes in 0 blocks
+==9671==      possibly lost: 0 bytes in 0 blocks
+==9671==    still reachable: 8,394,623 bytes in 189 blocks
+==9671==         suppressed: 0 bytes in 0 blocks
+==9671== Reachable blocks (those to which a pointer was found) are not shown.
+==9671== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9671== 
+==9671== For lists of detected and suppressed errors, rerun with: -s
+==9671== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9673== 
+==9673== HEAP SUMMARY:
+==9673==     in use at exit: 8,394,623 bytes in 189 blocks
+==9673==   total heap usage: 348 allocs, 159 frees, 8,399,631 bytes allocated
+==9673== 
+==9673== LEAK SUMMARY:
+==9673==    definitely lost: 0 bytes in 0 blocks
+==9673==    indirectly lost: 0 bytes in 0 blocks
+==9673==      possibly lost: 0 bytes in 0 blocks
+==9673==    still reachable: 8,394,623 bytes in 189 blocks
+==9673==         suppressed: 0 bytes in 0 blocks
+==9673== Reachable blocks (those to which a pointer was found) are not shown.
+==9673== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9673== 
+==9673== For lists of detected and suppressed errors, rerun with: -s
+==9673== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9675== 
+==9675== HEAP SUMMARY:
+==9675==     in use at exit: 8,394,623 bytes in 189 blocks
+==9675==   total heap usage: 350 allocs, 161 frees, 8,399,637 bytes allocated
+==9675== 
+==9675== LEAK SUMMARY:
+==9675==    definitely lost: 0 bytes in 0 blocks
+==9675==    indirectly lost: 0 bytes in 0 blocks
+==9675==      possibly lost: 0 bytes in 0 blocks
+==9675==    still reachable: 8,394,623 bytes in 189 blocks
+==9675==         suppressed: 0 bytes in 0 blocks
+==9675== Reachable blocks (those to which a pointer was found) are not shown.
+==9675== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9675== 
+==9675== For lists of detected and suppressed errors, rerun with: -s
+==9675== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9677== 
+==9677== HEAP SUMMARY:
+==9677==     in use at exit: 8,394,623 bytes in 189 blocks
+==9677==   total heap usage: 352 allocs, 163 frees, 8,399,643 bytes allocated
+==9677== 
+==9677== LEAK SUMMARY:
+==9677==    definitely lost: 0 bytes in 0 blocks
+==9677==    indirectly lost: 0 bytes in 0 blocks
+==9677==      possibly lost: 0 bytes in 0 blocks
+==9677==    still reachable: 8,394,623 bytes in 189 blocks
+==9677==         suppressed: 0 bytes in 0 blocks
+==9677== Reachable blocks (those to which a pointer was found) are not shown.
+==9677== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9677== 
+==9677== For lists of detected and suppressed errors, rerun with: -s
+==9677== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9679== 
+==9679== HEAP SUMMARY:
+==9679==     in use at exit: 8,394,623 bytes in 189 blocks
+==9679==   total heap usage: 354 allocs, 165 frees, 8,399,649 bytes allocated
+==9679== 
+==9679== LEAK SUMMARY:
+==9679==    definitely lost: 0 bytes in 0 blocks
+==9679==    indirectly lost: 0 bytes in 0 blocks
+==9679==      possibly lost: 0 bytes in 0 blocks
+==9679==    still reachable: 8,394,623 bytes in 189 blocks
+==9679==         suppressed: 0 bytes in 0 blocks
+==9679== Reachable blocks (those to which a pointer was found) are not shown.
+==9679== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9679== 
+==9679== For lists of detected and suppressed errors, rerun with: -s
+==9679== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9681== 
+==9681== HEAP SUMMARY:
+==9681==     in use at exit: 8,394,623 bytes in 189 blocks
+==9681==   total heap usage: 356 allocs, 167 frees, 8,399,655 bytes allocated
+==9681== 
+==9681== LEAK SUMMARY:
+==9681==    definitely lost: 0 bytes in 0 blocks
+==9681==    indirectly lost: 0 bytes in 0 blocks
+==9681==      possibly lost: 0 bytes in 0 blocks
+==9681==    still reachable: 8,394,623 bytes in 189 blocks
+==9681==         suppressed: 0 bytes in 0 blocks
+==9681== Reachable blocks (those to which a pointer was found) are not shown.
+==9681== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9681== 
+==9681== For lists of detected and suppressed errors, rerun with: -s
+==9681== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9683== 
+==9683== HEAP SUMMARY:
+==9683==     in use at exit: 8,394,623 bytes in 189 blocks
+==9683==   total heap usage: 358 allocs, 169 frees, 8,399,661 bytes allocated
+==9683== 
+==9683== LEAK SUMMARY:
+==9683==    definitely lost: 0 bytes in 0 blocks
+==9683==    indirectly lost: 0 bytes in 0 blocks
+==9683==      possibly lost: 0 bytes in 0 blocks
+==9683==    still reachable: 8,394,623 bytes in 189 blocks
+==9683==         suppressed: 0 bytes in 0 blocks
+==9683== Reachable blocks (those to which a pointer was found) are not shown.
+==9683== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9683== 
+==9683== For lists of detected and suppressed errors, rerun with: -s
+==9683== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9685== 
+==9685== HEAP SUMMARY:
+==9685==     in use at exit: 8,394,623 bytes in 189 blocks
+==9685==   total heap usage: 360 allocs, 171 frees, 8,399,667 bytes allocated
+==9685== 
+==9685== LEAK SUMMARY:
+==9685==    definitely lost: 0 bytes in 0 blocks
+==9685==    indirectly lost: 0 bytes in 0 blocks
+==9685==      possibly lost: 0 bytes in 0 blocks
+==9685==    still reachable: 8,394,623 bytes in 189 blocks
+==9685==         suppressed: 0 bytes in 0 blocks
+==9685== Reachable blocks (those to which a pointer was found) are not shown.
+==9685== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9685== 
+==9685== For lists of detected and suppressed errors, rerun with: -s
+==9685== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9687== 
+==9687== HEAP SUMMARY:
+==9687==     in use at exit: 8,394,623 bytes in 189 blocks
+==9687==   total heap usage: 362 allocs, 173 frees, 8,399,673 bytes allocated
+==9687== 
+==9687== LEAK SUMMARY:
+==9687==    definitely lost: 0 bytes in 0 blocks
+==9687==    indirectly lost: 0 bytes in 0 blocks
+==9687==      possibly lost: 0 bytes in 0 blocks
+==9687==    still reachable: 8,394,623 bytes in 189 blocks
+==9687==         suppressed: 0 bytes in 0 blocks
+==9687== Reachable blocks (those to which a pointer was found) are not shown.
+==9687== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9687== 
+==9687== For lists of detected and suppressed errors, rerun with: -s
+==9687== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9689== 
+==9689== HEAP SUMMARY:
+==9689==     in use at exit: 8,394,623 bytes in 189 blocks
+==9689==   total heap usage: 364 allocs, 175 frees, 8,399,679 bytes allocated
+==9689== 
+==9689== LEAK SUMMARY:
+==9689==    definitely lost: 0 bytes in 0 blocks
+==9689==    indirectly lost: 0 bytes in 0 blocks
+==9689==      possibly lost: 0 bytes in 0 blocks
+==9689==    still reachable: 8,394,623 bytes in 189 blocks
+==9689==         suppressed: 0 bytes in 0 blocks
+==9689== Reachable blocks (those to which a pointer was found) are not shown.
+==9689== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9689== 
+==9689== For lists of detected and suppressed errors, rerun with: -s
+==9689== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9691== 
+==9691== HEAP SUMMARY:
+==9691==     in use at exit: 8,394,623 bytes in 189 blocks
+==9691==   total heap usage: 366 allocs, 177 frees, 8,399,685 bytes allocated
+==9691== 
+==9691== LEAK SUMMARY:
+==9691==    definitely lost: 0 bytes in 0 blocks
+==9691==    indirectly lost: 0 bytes in 0 blocks
+==9691==      possibly lost: 0 bytes in 0 blocks
+==9691==    still reachable: 8,394,623 bytes in 189 blocks
+==9691==         suppressed: 0 bytes in 0 blocks
+==9691== Reachable blocks (those to which a pointer was found) are not shown.
+==9691== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9691== 
+==9691== For lists of detected and suppressed errors, rerun with: -s
+==9691== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9695== 
+==9695== HEAP SUMMARY:
+==9695==     in use at exit: 8,394,623 bytes in 189 blocks
+==9695==   total heap usage: 368 allocs, 179 frees, 8,399,691 bytes allocated
+==9695== 
+==9695== LEAK SUMMARY:
+==9695==    definitely lost: 0 bytes in 0 blocks
+==9695==    indirectly lost: 0 bytes in 0 blocks
+==9695==      possibly lost: 0 bytes in 0 blocks
+==9695==    still reachable: 8,394,623 bytes in 189 blocks
+==9695==         suppressed: 0 bytes in 0 blocks
+==9695== Reachable blocks (those to which a pointer was found) are not shown.
+==9695== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9695== 
+==9695== For lists of detected and suppressed errors, rerun with: -s
+==9695== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9697== 
+==9697== HEAP SUMMARY:
+==9697==     in use at exit: 8,394,623 bytes in 189 blocks
+==9697==   total heap usage: 370 allocs, 181 frees, 8,399,697 bytes allocated
+==9697== 
+==9697== LEAK SUMMARY:
+==9697==    definitely lost: 0 bytes in 0 blocks
+==9697==    indirectly lost: 0 bytes in 0 blocks
+==9697==      possibly lost: 0 bytes in 0 blocks
+==9697==    still reachable: 8,394,623 bytes in 189 blocks
+==9697==         suppressed: 0 bytes in 0 blocks
+==9697== Reachable blocks (those to which a pointer was found) are not shown.
+==9697== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9697== 
+==9697== For lists of detected and suppressed errors, rerun with: -s
+==9697== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9699== 
+==9699== HEAP SUMMARY:
+==9699==     in use at exit: 8,394,623 bytes in 189 blocks
+==9699==   total heap usage: 372 allocs, 183 frees, 8,399,703 bytes allocated
+==9699== 
+==9699== LEAK SUMMARY:
+==9699==    definitely lost: 0 bytes in 0 blocks
+==9699==    indirectly lost: 0 bytes in 0 blocks
+==9699==      possibly lost: 0 bytes in 0 blocks
+==9699==    still reachable: 8,394,623 bytes in 189 blocks
+==9699==         suppressed: 0 bytes in 0 blocks
+==9699== Reachable blocks (those to which a pointer was found) are not shown.
+==9699== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9699== 
+==9699== For lists of detected and suppressed errors, rerun with: -s
+==9699== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9702== 
+==9702== HEAP SUMMARY:
+==9702==     in use at exit: 8,394,623 bytes in 189 blocks
+==9702==   total heap usage: 374 allocs, 185 frees, 8,399,709 bytes allocated
+==9702== 
+==9702== LEAK SUMMARY:
+==9702==    definitely lost: 0 bytes in 0 blocks
+==9702==    indirectly lost: 0 bytes in 0 blocks
+==9702==      possibly lost: 0 bytes in 0 blocks
+==9702==    still reachable: 8,394,623 bytes in 189 blocks
+==9702==         suppressed: 0 bytes in 0 blocks
+==9702== Reachable blocks (those to which a pointer was found) are not shown.
+==9702== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9702== 
+==9702== For lists of detected and suppressed errors, rerun with: -s
+==9702== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9704== 
+==9704== HEAP SUMMARY:
+==9704==     in use at exit: 8,394,623 bytes in 189 blocks
+==9704==   total heap usage: 376 allocs, 187 frees, 8,399,715 bytes allocated
+==9704== 
+==9704== LEAK SUMMARY:
+==9704==    definitely lost: 0 bytes in 0 blocks
+==9704==    indirectly lost: 0 bytes in 0 blocks
+==9704==      possibly lost: 0 bytes in 0 blocks
+==9704==    still reachable: 8,394,623 bytes in 189 blocks
+==9704==         suppressed: 0 bytes in 0 blocks
+==9704== Reachable blocks (those to which a pointer was found) are not shown.
+==9704== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9704== 
+==9704== For lists of detected and suppressed errors, rerun with: -s
+==9704== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9706== 
+==9706== HEAP SUMMARY:
+==9706==     in use at exit: 8,394,623 bytes in 189 blocks
+==9706==   total heap usage: 378 allocs, 189 frees, 8,399,721 bytes allocated
+==9706== 
+==9706== LEAK SUMMARY:
+==9706==    definitely lost: 0 bytes in 0 blocks
+==9706==    indirectly lost: 0 bytes in 0 blocks
+==9706==      possibly lost: 0 bytes in 0 blocks
+==9706==    still reachable: 8,394,623 bytes in 189 blocks
+==9706==         suppressed: 0 bytes in 0 blocks
+==9706== Reachable blocks (those to which a pointer was found) are not shown.
+==9706== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9706== 
+==9706== For lists of detected and suppressed errors, rerun with: -s
+==9706== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9708== 
+==9708== HEAP SUMMARY:
+==9708==     in use at exit: 8,394,623 bytes in 189 blocks
+==9708==   total heap usage: 380 allocs, 191 frees, 8,399,727 bytes allocated
+==9708== 
+==9708== LEAK SUMMARY:
+==9708==    definitely lost: 0 bytes in 0 blocks
+==9708==    indirectly lost: 0 bytes in 0 blocks
+==9708==      possibly lost: 0 bytes in 0 blocks
+==9708==    still reachable: 8,394,623 bytes in 189 blocks
+==9708==         suppressed: 0 bytes in 0 blocks
+==9708== Reachable blocks (those to which a pointer was found) are not shown.
+==9708== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9708== 
+==9708== For lists of detected and suppressed errors, rerun with: -s
+==9708== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9710== 
+==9710== HEAP SUMMARY:
+==9710==     in use at exit: 8,394,623 bytes in 189 blocks
+==9710==   total heap usage: 382 allocs, 193 frees, 8,399,733 bytes allocated
+==9710== 
+==9710== LEAK SUMMARY:
+==9710==    definitely lost: 0 bytes in 0 blocks
+==9710==    indirectly lost: 0 bytes in 0 blocks
+==9710==      possibly lost: 0 bytes in 0 blocks
+==9710==    still reachable: 8,394,623 bytes in 189 blocks
+==9710==         suppressed: 0 bytes in 0 blocks
+==9710== Reachable blocks (those to which a pointer was found) are not shown.
+==9710== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9710== 
+==9710== For lists of detected and suppressed errors, rerun with: -s
+==9710== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9712== 
+==9712== HEAP SUMMARY:
+==9712==     in use at exit: 8,394,623 bytes in 189 blocks
+==9712==   total heap usage: 384 allocs, 195 frees, 8,399,739 bytes allocated
+==9712== 
+==9712== LEAK SUMMARY:
+==9712==    definitely lost: 0 bytes in 0 blocks
+==9712==    indirectly lost: 0 bytes in 0 blocks
+==9712==      possibly lost: 0 bytes in 0 blocks
+==9712==    still reachable: 8,394,623 bytes in 189 blocks
+==9712==         suppressed: 0 bytes in 0 blocks
+==9712== Reachable blocks (those to which a pointer was found) are not shown.
+==9712== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9712== 
+==9712== For lists of detected and suppressed errors, rerun with: -s
+==9712== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9714== 
+==9714== HEAP SUMMARY:
+==9714==     in use at exit: 8,394,623 bytes in 189 blocks
+==9714==   total heap usage: 386 allocs, 197 frees, 8,399,745 bytes allocated
+==9714== 
+==9714== LEAK SUMMARY:
+==9714==    definitely lost: 0 bytes in 0 blocks
+==9714==    indirectly lost: 0 bytes in 0 blocks
+==9714==      possibly lost: 0 bytes in 0 blocks
+==9714==    still reachable: 8,394,623 bytes in 189 blocks
+==9714==         suppressed: 0 bytes in 0 blocks
+==9714== Reachable blocks (those to which a pointer was found) are not shown.
+==9714== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9714== 
+==9714== For lists of detected and suppressed errors, rerun with: -s
+==9714== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9716== 
+==9716== HEAP SUMMARY:
+==9716==     in use at exit: 8,394,623 bytes in 189 blocks
+==9716==   total heap usage: 388 allocs, 199 frees, 8,399,751 bytes allocated
+==9716== 
+==9716== LEAK SUMMARY:
+==9716==    definitely lost: 0 bytes in 0 blocks
+==9716==    indirectly lost: 0 bytes in 0 blocks
+==9716==      possibly lost: 0 bytes in 0 blocks
+==9716==    still reachable: 8,394,623 bytes in 189 blocks
+==9716==         suppressed: 0 bytes in 0 blocks
+==9716== Reachable blocks (those to which a pointer was found) are not shown.
+==9716== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9716== 
+==9716== For lists of detected and suppressed errors, rerun with: -s
+==9716== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9718== 
+==9718== HEAP SUMMARY:
+==9718==     in use at exit: 8,394,623 bytes in 189 blocks
+==9718==   total heap usage: 390 allocs, 201 frees, 8,399,757 bytes allocated
+==9718== 
+==9718== LEAK SUMMARY:
+==9718==    definitely lost: 0 bytes in 0 blocks
+==9718==    indirectly lost: 0 bytes in 0 blocks
+==9718==      possibly lost: 0 bytes in 0 blocks
+==9718==    still reachable: 8,394,623 bytes in 189 blocks
+==9718==         suppressed: 0 bytes in 0 blocks
+==9718== Reachable blocks (those to which a pointer was found) are not shown.
+==9718== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9718== 
+==9718== For lists of detected and suppressed errors, rerun with: -s
+==9718== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9720== 
+==9720== HEAP SUMMARY:
+==9720==     in use at exit: 8,394,623 bytes in 189 blocks
+==9720==   total heap usage: 392 allocs, 203 frees, 8,399,763 bytes allocated
+==9720== 
+==9720== LEAK SUMMARY:
+==9720==    definitely lost: 0 bytes in 0 blocks
+==9720==    indirectly lost: 0 bytes in 0 blocks
+==9720==      possibly lost: 0 bytes in 0 blocks
+==9720==    still reachable: 8,394,623 bytes in 189 blocks
+==9720==         suppressed: 0 bytes in 0 blocks
+==9720== Reachable blocks (those to which a pointer was found) are not shown.
+==9720== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9720== 
+==9720== For lists of detected and suppressed errors, rerun with: -s
+==9720== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9722== 
+==9722== HEAP SUMMARY:
+==9722==     in use at exit: 8,394,623 bytes in 189 blocks
+==9722==   total heap usage: 394 allocs, 205 frees, 8,399,769 bytes allocated
+==9722== 
+==9722== LEAK SUMMARY:
+==9722==    definitely lost: 0 bytes in 0 blocks
+==9722==    indirectly lost: 0 bytes in 0 blocks
+==9722==      possibly lost: 0 bytes in 0 blocks
+==9722==    still reachable: 8,394,623 bytes in 189 blocks
+==9722==         suppressed: 0 bytes in 0 blocks
+==9722== Reachable blocks (those to which a pointer was found) are not shown.
+==9722== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9722== 
+==9722== For lists of detected and suppressed errors, rerun with: -s
+==9722== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9724== 
+==9724== HEAP SUMMARY:
+==9724==     in use at exit: 8,394,623 bytes in 189 blocks
+==9724==   total heap usage: 396 allocs, 207 frees, 8,399,775 bytes allocated
+==9724== 
+==9724== LEAK SUMMARY:
+==9724==    definitely lost: 0 bytes in 0 blocks
+==9724==    indirectly lost: 0 bytes in 0 blocks
+==9724==      possibly lost: 0 bytes in 0 blocks
+==9724==    still reachable: 8,394,623 bytes in 189 blocks
+==9724==         suppressed: 0 bytes in 0 blocks
+==9724== Reachable blocks (those to which a pointer was found) are not shown.
+==9724== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9724== 
+==9724== For lists of detected and suppressed errors, rerun with: -s
+==9724== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9726== 
+==9726== HEAP SUMMARY:
+==9726==     in use at exit: 8,394,623 bytes in 189 blocks
+==9726==   total heap usage: 398 allocs, 209 frees, 8,399,781 bytes allocated
+==9726== 
+==9726== LEAK SUMMARY:
+==9726==    definitely lost: 0 bytes in 0 blocks
+==9726==    indirectly lost: 0 bytes in 0 blocks
+==9726==      possibly lost: 0 bytes in 0 blocks
+==9726==    still reachable: 8,394,623 bytes in 189 blocks
+==9726==         suppressed: 0 bytes in 0 blocks
+==9726== Reachable blocks (those to which a pointer was found) are not shown.
+==9726== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9726== 
+==9726== For lists of detected and suppressed errors, rerun with: -s
+==9726== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9728== 
+==9728== HEAP SUMMARY:
+==9728==     in use at exit: 8,394,623 bytes in 189 blocks
+==9728==   total heap usage: 400 allocs, 211 frees, 8,399,787 bytes allocated
+==9728== 
+==9728== LEAK SUMMARY:
+==9728==    definitely lost: 0 bytes in 0 blocks
+==9728==    indirectly lost: 0 bytes in 0 blocks
+==9728==      possibly lost: 0 bytes in 0 blocks
+==9728==    still reachable: 8,394,623 bytes in 189 blocks
+==9728==         suppressed: 0 bytes in 0 blocks
+==9728== Reachable blocks (those to which a pointer was found) are not shown.
+==9728== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9728== 
+==9728== For lists of detected and suppressed errors, rerun with: -s
+==9728== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9730== 
+==9730== HEAP SUMMARY:
+==9730==     in use at exit: 8,394,623 bytes in 189 blocks
+==9730==   total heap usage: 402 allocs, 213 frees, 8,399,793 bytes allocated
+==9730== 
+==9730== LEAK SUMMARY:
+==9730==    definitely lost: 0 bytes in 0 blocks
+==9730==    indirectly lost: 0 bytes in 0 blocks
+==9730==      possibly lost: 0 bytes in 0 blocks
+==9730==    still reachable: 8,394,623 bytes in 189 blocks
+==9730==         suppressed: 0 bytes in 0 blocks
+==9730== Reachable blocks (those to which a pointer was found) are not shown.
+==9730== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9730== 
+==9730== For lists of detected and suppressed errors, rerun with: -s
+==9730== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9732== 
+==9732== HEAP SUMMARY:
+==9732==     in use at exit: 8,394,623 bytes in 189 blocks
+==9732==   total heap usage: 404 allocs, 215 frees, 8,399,799 bytes allocated
+==9732== 
+==9732== LEAK SUMMARY:
+==9732==    definitely lost: 0 bytes in 0 blocks
+==9732==    indirectly lost: 0 bytes in 0 blocks
+==9732==      possibly lost: 0 bytes in 0 blocks
+==9732==    still reachable: 8,394,623 bytes in 189 blocks
+==9732==         suppressed: 0 bytes in 0 blocks
+==9732== Reachable blocks (those to which a pointer was found) are not shown.
+==9732== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9732== 
+==9732== For lists of detected and suppressed errors, rerun with: -s
+==9732== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9734== 
+==9734== HEAP SUMMARY:
+==9734==     in use at exit: 8,394,623 bytes in 189 blocks
+==9734==   total heap usage: 406 allocs, 217 frees, 8,399,805 bytes allocated
+==9734== 
+==9734== LEAK SUMMARY:
+==9734==    definitely lost: 0 bytes in 0 blocks
+==9734==    indirectly lost: 0 bytes in 0 blocks
+==9734==      possibly lost: 0 bytes in 0 blocks
+==9734==    still reachable: 8,394,623 bytes in 189 blocks
+==9734==         suppressed: 0 bytes in 0 blocks
+==9734== Reachable blocks (those to which a pointer was found) are not shown.
+==9734== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9734== 
+==9734== For lists of detected and suppressed errors, rerun with: -s
+==9734== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9736== 
+==9736== HEAP SUMMARY:
+==9736==     in use at exit: 8,394,623 bytes in 189 blocks
+==9736==   total heap usage: 408 allocs, 219 frees, 8,399,811 bytes allocated
+==9736== 
+==9736== LEAK SUMMARY:
+==9736==    definitely lost: 0 bytes in 0 blocks
+==9736==    indirectly lost: 0 bytes in 0 blocks
+==9736==      possibly lost: 0 bytes in 0 blocks
+==9736==    still reachable: 8,394,623 bytes in 189 blocks
+==9736==         suppressed: 0 bytes in 0 blocks
+==9736== Reachable blocks (those to which a pointer was found) are not shown.
+==9736== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9736== 
+==9736== For lists of detected and suppressed errors, rerun with: -s
+==9736== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9739== 
+==9739== HEAP SUMMARY:
+==9739==     in use at exit: 8,394,775 bytes in 192 blocks
+==9739==   total heap usage: 413 allocs, 221 frees, 8,399,969 bytes allocated
+==9739== 
+==9739== LEAK SUMMARY:
+==9739==    definitely lost: 0 bytes in 0 blocks
+==9739==    indirectly lost: 0 bytes in 0 blocks
+==9739==      possibly lost: 0 bytes in 0 blocks
+==9739==    still reachable: 8,394,775 bytes in 192 blocks
+==9739==         suppressed: 0 bytes in 0 blocks
+==9739== Reachable blocks (those to which a pointer was found) are not shown.
+==9739== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9739== 
+==9739== For lists of detected and suppressed errors, rerun with: -s
+==9739== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9744== 
+==9744== HEAP SUMMARY:
+==9744==     in use at exit: 8,394,958 bytes in 202 blocks
+==9744==   total heap usage: 429 allocs, 227 frees, 8,400,768 bytes allocated
+==9744== 
+==9744== 114 bytes in 1 blocks are definitely lost in loss record 30 of 34
+==9744==    at 0x4846828: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
+==9744==    by 0x10C2E9: sh_alloc (blok.c:25)
+==9744==    by 0x11BE63: allocjob (jobs.c:673)
+==9744==    by 0x118FE9: execute (xec.c:236)
+==9744==    by 0x1131F8: exfile (main.c:419)
+==9744==    by 0x112F10: main (main.c:323)
+==9744== 
+==9744== LEAK SUMMARY:
+==9744==    definitely lost: 114 bytes in 1 blocks
+==9744==    indirectly lost: 0 bytes in 0 blocks
+==9744==      possibly lost: 0 bytes in 0 blocks
+==9744==    still reachable: 8,394,844 bytes in 201 blocks
+==9744==         suppressed: 0 bytes in 0 blocks
+==9744== Reachable blocks (those to which a pointer was found) are not shown.
+==9744== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9744== 
+==9744== For lists of detected and suppressed errors, rerun with: -s
+==9744== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)
+==9750== 
+==9750== HEAP SUMMARY:
+==9750==     in use at exit: 8,395,095 bytes in 214 blocks
+==9750==   total heap usage: 443 allocs, 229 frees, 8,401,133 bytes allocated
+==9750== 
+==9750== LEAK SUMMARY:
+==9750==    definitely lost: 0 bytes in 0 blocks
+==9750==    indirectly lost: 0 bytes in 0 blocks
+==9750==      possibly lost: 0 bytes in 0 blocks
+==9750==    still reachable: 8,395,095 bytes in 214 blocks
+==9750==         suppressed: 0 bytes in 0 blocks
+==9750== Reachable blocks (those to which a pointer was found) are not shown.
+==9750== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9750== 
+==9750== For lists of detected and suppressed errors, rerun with: -s
+==9750== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
+==9522== 
+==9522== HEAP SUMMARY:
+==9522==     in use at exit: 8,395,155 bytes in 214 blocks
+==9522==   total heap usage: 442 allocs, 228 frees, 8,401,147 bytes allocated
+==9522== 
+==9522== LEAK SUMMARY:
+==9522==    definitely lost: 0 bytes in 0 blocks
+==9522==    indirectly lost: 0 bytes in 0 blocks
+==9522==      possibly lost: 0 bytes in 0 blocks
+==9522==    still reachable: 8,395,155 bytes in 214 blocks
+==9522==         suppressed: 0 bytes in 0 blocks
+==9522== Reachable blocks (those to which a pointer was found) are not shown.
+==9522== To see them, rerun with: --leak-check=full --show-leak-kinds=all
+==9522== 
+==9522== For lists of detected and suppressed errors, rerun with: -s
+==9522== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/word.c /home/mario/git/irish/word.c
--- /home/mario/Downloads/original-bsh/word.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/word.c	2025-12-25 20:41:39.182814022 +0200
@@ -19,14 +19,13 @@
 
 extern int mbftowc();
 extern int close();
-extern int read();
 
 /* ========	character handling for command lines	========*/
 
 int
 word()
 {
-	register unsigned char	c, d;
+	register int	c, d;
 	struct argnod	*arg = (struct argnod *)locstak();
 	register unsigned char	*argp = arg->argval;
 	unsigned char	*oldargp;
@@ -64,7 +63,7 @@
 				/* Pick up rest of multibyte character */
 					if (c == NL)
 						chkpr();
-					while(c = *pc++)
+					while((c = *pc++))
 						*argp++ = c;
 				}
 				if(argp == oldargp) { /* null argument - '' */
@@ -98,18 +97,18 @@
 					}
 				}
 			}
-		} while ((c = nextc(), !eofmeta(c)));
-		argp = endstak(argp);
+		} while (c = nextc(), !eofmeta(c));
+		argp = (unsigned char *)endstak(argp);
 		if (!letter(arg->argval[0]))
 			wdset = 0;
 
-		peekn = c | MARK;
+		peekc = c;
 		if (arg->argval[1] == 0 && 
 		    (d = arg->argval[0], digit(d)) && 
 		    (c == '>' || c == '<'))
 		{
 			word();
-			wdnum = d - '0';
+			wdnum = (d - '0') | IODIGFD;
 		}
 		else		/*check for reserved words*/
 		{
@@ -130,12 +129,12 @@
 				if ((d = nextc()) == '-')
 					wdnum |= IOSTRIP;
 				else
-					peekn = d | MARK;
+					peekc = d;
 			}
 		}
 		else
 		{
-			peekn = d | MARK;
+			peekc = d;
 			wdval = c;
 		}
 	}
@@ -153,66 +152,21 @@
 	return(wdval);
 }
 
-unsigned char skipc()
+int readc()
 {
-	register unsigned char c;
-
-	while (c = nextc(), space(c))
-		;
-	return(c);
-}
-
-unsigned char nextc()
-{
-	register unsigned char	c, d;
-
-retry:
-	if ((d = readc()) == ESCAPE)
-	{
-		if ((c = readc()) == NL)
-		{
-			chkpr();
-			goto retry;
-		}
-		peekc = c | MARK;
-	}
-	return(d);
-}
-
-unsigned char *readw(d)
-unsigned char d;
-{
-	static unsigned char c[MULTI_BYTE_MAX + 1];
-	int length;
-	wchar_t l;
-	if(!multibyte || d < 0200) {
-		c[0] = d;
-		c[1] = '\0';
-		return(c);
-	}
-	peekc = d; /* will not overwrite peekc = '\\' */
-	length = mbftowc(c, &l, readc, &peekc);
-	if(length < 0)
-		length = -length;
-	c[length] = '\0';
-	return(c);
-}
-
-unsigned char readc()
-{
-	register unsigned char	c;
+	register int	c;
 	register int	len;
 	register struct fileblk *f;
 
 	if (peekn)
 	{
-		c = (unsigned char)peekn;
+		c = peekn;
 		peekn = 0;
 		return(c);
 	}
 	if (peekc)
 	{
-		c = (unsigned char)peekc;
+		c = peekc;
 		peekc = 0;
 		return(c);
 	}
@@ -230,7 +184,7 @@
 					c = SP;
 			}
 			else
-				goto retry;	/* = c = readc(); */
+				return(0);
 		}
 		if (flags & readpr && standin->fstak == 0)
 			prc(c);
@@ -239,7 +193,7 @@
 	}
 	else if (f->feof || f->fdes < 0)
 	{
-		c = EOF;
+		c = 0;
 		f->feof++;
 	}
 	else if ((len = readb()) <= 0)
@@ -249,7 +203,7 @@
 			f->fdes = -1;
 		}
 		f->feof++;
-		c = EOF;
+		c = 0;
 	}
 	else
 	{
@@ -259,6 +213,25 @@
 	return(c);
 }
 
+int nextc()
+{
+	register int	c;
+	if (peekn)
+	{
+		c = peekn;
+		peekn = 0;
+		return(c);
+	}
+	if (peekc)
+	{
+		c = peekc;
+		peekc = 0;
+		return(c);
+	}
+	c = readc();
+	return(c);
+}
+
 static int
 readb()
 {
@@ -281,3 +254,42 @@
 	} while ((len = read(f->fdes, f->fbuf, f->fsiz)) < 0 && trapnote);
 	return(len);
 }
+
+int
+skipc()
+{
+	register int c;
+
+	while (c = nextc(), space(c))
+		;
+	return(c);
+}
+
+unsigned char *
+readw(d)
+unsigned char d;
+{
+	static unsigned char c[MULTI_BYTE_MAX + 1];
+	int length;
+	wchar_t l;
+	if(!multibyte || d < 0200) {
+		c[0] = d;
+		c[1] = '\0';
+		return(c);
+	}
+	peekc = d;
+	length = mbtowc(&l, (char *)&d, 1); /* Simple fallback or use mbftowc if available */
+	/* 
+	 * Note: Irix sh seems to have mbftowc, but since it's undefined at link time 
+	 * or it's in a library we don't have, I'll use a conservative approach.
+	 * Actually, let's try to use mbtowc which is standard.
+	 */
+	if (length <= 0) {
+		c[0] = d;
+		c[1] = '\0';
+		return(c);
+	}
+	c[0] = d;
+	c[1] = '\0';
+	return(c);
+}
Binary files /home/mario/Downloads/original-bsh/word.o and /home/mario/git/irish/word.o differ
diff -urN '--exclude=.git*' '--exclude=irix-bsh-port.patch' '--exclude=LICENSE' '--exclude=README*' '--exclude=*.sh' '--exclude=*.1' '--exclude=.*' /home/mario/Downloads/original-bsh/xec.c /home/mario/git/irish/xec.c
--- /home/mario/Downloads/original-bsh/xec.c	2022-09-29 17:59:04.000000000 +0300
+++ /home/mario/git/irish/xec.c	2025-12-25 20:41:39.182814022 +0200
@@ -37,6 +37,8 @@
 int
 execute(argt, xflags, errorflg, pf1, pf2)
 struct trenod	*argt;
+int xflags;
+int errorflg;
 int	*pf1, *pf2;
 {
 	/*
@@ -127,7 +129,6 @@
 					if ((cnt = findpath(com[0], 0)) > 0)
 					{
 						register unsigned char *path;
-						int len;
 
 						path = getpath(com[0]);
 						while (--cnt && path)
@@ -221,7 +222,7 @@
 				if (!(treeflgs&FPOU)) 
 				{
 					monitor = (!(xflags & XEC_NOSTOP)
-					  && (flags&(monitorflg|jcflg|jcoff))
+					  && (flags&(monitorflg|jcflg))
 					  == (monitorflg|jcflg));
 					if (monitor) {
 						int savefd;
@@ -280,7 +281,7 @@
 				mypid = getpid();
 			}
 		
-			flags |= (forked|jcoff);
+			flags |= forked;
 
 			fiotemp  = 0;
 
@@ -345,7 +346,6 @@
 			 * It's also not at all apparent that the above fix
 			 * is correct.
 			 */
-			flags &= ~jcoff;
 			clearjobs();
 			execute(parptr(t)->partre, xflags|XEC_NOSTOP, errorflg);
 			done(0);
@@ -374,7 +374,7 @@
 		case TAND:
 		case TORF:
 		{
-			register xval;
+			register int xval;
 			xval = execute(lstptr(t)->lstlef, XEC_NOSTOP, 0);
 			if ((xval == 0) == (type == TAND))
 				execute(lstptr(t)->lstrit, xflags|XEC_NOSTOP, errorflg);
@@ -465,7 +465,7 @@
 					{
 						register unsigned char	*s;
 
-						if (gmatch(r, s = macro(rex->argval)) || (trim(s), eq(r, s)))
+						if (gmatch((const char *)r, (const char *)(s = macro(rex->argval))) || (trim(s), eq(r, s)))
 						{
 							execute(regp->regcom, XEC_NOSTOP, errorflg);
 							regp = 0;
@@ -499,7 +499,7 @@
 	if (s)
 	{
 		estabf(s);
-		fb.feval = (unsigned char **)(f);
+		fb.feval = (unsigned char **)(long)(f);
 	}
 	else if (f >= 0)
 		initf(f);
Binary files /home/mario/Downloads/original-bsh/xec.o and /home/mario/git/irish/xec.o differ
